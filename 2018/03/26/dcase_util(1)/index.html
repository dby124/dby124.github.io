<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="python," />





  <link rel="alternate" href="/atom.xml" title="beatrice's blogs" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.2" />






<meta name="description" content="关于音频场景识别的一个基于python的程序合集dcase_util，是英文的，所以在此将其翻译成了中文，以便查阅。 dcase_util文档描述了为声场景和事件检测和分类（DCASE）创建的实用程序集合。这些实用程序最初是为DCASE挑战基线系统（2016和2017）创建的，并捆绑到独立库中以允许其在其他研究项目中重复使用。 这些实用程序的主要目标是简化研究代码，使其更易读，更易于维护。大多数实">
<meta name="keywords" content="python">
<meta property="og:type" content="article">
<meta property="og:title" content="dcase_util教程">
<meta property="og:url" content="http://yoursite.com/2018/03/26/dcase_util(1)/index.html">
<meta property="og:site_name" content="beatrice&#39;s blogs">
<meta property="og:description" content="关于音频场景识别的一个基于python的程序合集dcase_util，是英文的，所以在此将其翻译成了中文，以便查阅。 dcase_util文档描述了为声场景和事件检测和分类（DCASE）创建的实用程序集合。这些实用程序最初是为DCASE挑战基线系统（2016和2017）创建的，并捆绑到独立库中以允许其在其他研究项目中重复使用。 这些实用程序的主要目标是简化研究代码，使其更易读，更易于维护。大多数实">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-04-18T01:45:17.894Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dcase_util教程">
<meta name="twitter:description" content="关于音频场景识别的一个基于python的程序合集dcase_util，是英文的，所以在此将其翻译成了中文，以便查阅。 dcase_util文档描述了为声场景和事件检测和分类（DCASE）创建的实用程序集合。这些实用程序最初是为DCASE挑战基线系统（2016和2017）创建的，并捆绑到独立库中以允许其在其他研究项目中重复使用。 这些实用程序的主要目标是简化研究代码，使其更易读，更易于维护。大多数实">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"hide","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/03/26/dcase_util(1)/"/>





  <title>dcase_util教程 | beatrice's blogs</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">beatrice's blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开启程序员之旅，坚持学习和思考，想知道最后的自己能做到哪一步，拭目以待吧。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/26/dcase_util(1)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="beatrice">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/beatrice.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="beatrice's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">dcase_util教程</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-26T11:31:53+08:00">
                2018-03-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/DCASE/" itemprop="url" rel="index">
                    <span itemprop="name">DCASE</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>关于音频场景识别的一个基于python的程序合集dcase_util，是英文的，所以在此将其翻译成了中文，以便查阅。</p>
<p><a href="https://dcase-repo.github.io/dcase_util" target="_blank" rel="external">dcase_util</a>文档描述了为声场景和事件检测和分类（DCASE）创建的实用程序集合。这些实用程序最初是为DCASE挑战基线系统（2016和2017）创建的，并捆绑到独立库中以允许其在其他研究项目中重复使用。</p>
<p>这些实用程序的主要目标是简化研究代码，使其更易读，更易于维护。大多数实施的实用程序都与音频数据集相关：处理元数据和各种形式的其他结构化数据，并为各种来源的音频数据集提供标准化的使用API。</p>
<p>dcase_util中包含的概念有：</p>
<ul>
<li>Dataset：一组音频信号和与之相关的参考标注。</li>
<li>Container：类存储数据并基于要存储的数据类型，提供有意义且清晰的数据访问。</li>
<li>Metadata：数据注释。</li>
<li>Repository：容器来存储多个数据容器。</li>
<li>Encoder：用于将数据从不同类型转换为另一类型。</li>
<li>Processor：为处理数据提供统一API的类。</li>
<li>ProcessingChain：在一个链中连接多个数据处理器，允许构建数据的复杂处理。</li>
</ul>
<p>在搭建好了python环境之后，使用下列pip命令安装dcase_util。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install dcase_util</div></pre></td></tr></table></figure></p>
<p>下面是各个单元的使用教程</p>
<h2 id="1-Container"><a href="#1-Container" class="headerlink" title="1.Container"></a>1.Container</h2><p>该库提供数据container以简化工作流程。 这些container是从标准的Python container（例如对象，列表和字典）继承的，以使它们可以与其他工具和库一起使用。 这些数据的目的是为了包装数据，使用有用的方法来访问和操作数据，以及加载和存储数据。</p>
<h3 id="1-1基本用法"><a href="#1-1基本用法" class="headerlink" title="1.1基本用法"></a>1.1基本用法</h3><ul>
<li>四种从文件中加载内容的方式：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"># 1</div><div class="line">dict_container = dcase_util.containers.DictContainer(filename=&apos;test.yaml&apos;)</div><div class="line">dict_container.load()</div><div class="line"></div><div class="line"># 2</div><div class="line">dict_container = dcase_util.containers.DictContainer()</div><div class="line">dict_container.load(filename=&apos;test.yaml&apos;)</div><div class="line"></div><div class="line"># 3</div><div class="line">dict_container = dcase_util.containers.DictContainer(filename=&apos;test.yaml&apos;).load()</div><div class="line"></div><div class="line"># 4</div><div class="line">dict_container = dcase_util.containers.DictContainer().load(filename=&apos;test.yaml&apos;)</div></pre></td></tr></table></figure>
<ul>
<li>将内容保存到文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dict_container.save(filename=&apos;test.yaml&apos;)</div></pre></td></tr></table></figure>
<ul>
<li>查看并在控制器中打印container内容</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dict_container.show()</div></pre></td></tr></table></figure>
<ul>
<li>查看并在标准日志记录系统中打印</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dict_container.log()</div></pre></td></tr></table></figure>
<blockquote>
<p>如果日志记录系统在调用之前未被初始化，那么将使用带默认参数的dcase_util.utils.setup_logging来初始化它。</p>
</blockquote>
<h3 id="1-2-字典"><a href="#1-2-字典" class="headerlink" title="1.2 字典"></a>1.2 字典</h3><p><code>dcase_util.containers.DictContainer</code>设计用于嵌套字典比标准字典数据container更容易一些。它允许通过所谓的虚线路径或路径部分列表访问嵌套字典中的字段。</p>
<ul>
<li>用字典初始化container</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">dict_container = dcase_util.containers.DictContainer(</div><div class="line">    &#123;</div><div class="line">        &apos;test&apos;: &#123;</div><div class="line">            &apos;field1&apos;: 1,</div><div class="line">            &apos;field2&apos;: 2,</div><div class="line">        &#125;,</div><div class="line">        &apos;test2&apos;: 100,</div><div class="line">        &apos;test3&apos;: &#123;</div><div class="line">            &apos;field1&apos;: &#123;</div><div class="line">                &apos;fieldA&apos;: 1</div><div class="line">            &#125;,</div><div class="line">            &apos;field2&apos;: &#123;</div><div class="line">                &apos;fieldA&apos;: 1</div><div class="line">            &#125;,</div><div class="line">            &apos;field3&apos;: &#123;</div><div class="line">                &apos;fieldA&apos;: 1</div><div class="line">            &#125;,</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<ul>
<li>初始化container，从文件中加载内容</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dict_container = dcase_util.containers.DictContainer().load(filename=&apos;test.yaml&apos;)</div></pre></td></tr></table></figure>
<ul>
<li>通过点路径(dotted path)访问字段：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># Field exists</div><div class="line">value = dict_container.get_path(&apos;test.field1&apos;)</div><div class="line"></div><div class="line"># Using wild card</div><div class="line">values = dict_container.get_path(&apos;test3.*&apos;)</div><div class="line"></div><div class="line"># Non existing field with default value</div><div class="line">value = dict_container.get_path(&apos;test.fieldA&apos;, &apos;default_value&apos;)</div></pre></td></tr></table></figure>
<ul>
<li>通过路径部分列表访问字段</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># Field exists</div><div class="line">value = dict_container.get_path([&apos;test&apos;, &apos;field1&apos;])</div><div class="line"></div><div class="line"># Non existing field with default value</div><div class="line">value = dict_container.get_path([&apos;test&apos;, &apos;fieldA&apos;], &apos;default_value)</div></pre></td></tr></table></figure>
<ul>
<li>通过点路劲设置字段</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dict_container.set_path(&apos;test.field2&apos;, 200)</div></pre></td></tr></table></figure>
<ul>
<li>获取嵌套字典中所有叶节点的点路径</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dict_container.get_leaf_path_list()</div></pre></td></tr></table></figure>
<ul>
<li>获取嵌套字典中以’field’开头的所有叶节点的虚线路径</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dict_container.get_leaf_path_list(target_field_startswith=&apos;field&apos;)</div></pre></td></tr></table></figure>
<ul>
<li>把container存成.yaml文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dict_container.save(filename=&apos;test.yaml&apos;)</div></pre></td></tr></table></figure>
<ul>
<li>从.yaml文件中加载container内容</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dict_container.load(filename=&apos;test.yaml&apos;)</div></pre></td></tr></table></figure>
<h3 id="1-3-字典列表"><a href="#1-3-字典列表" class="headerlink" title="1.3 字典列表"></a>1.3 字典列表</h3><p><code>dcase_util.containers.ListDictContainer</code>是用于存储<code>dcase_util.containers.DictContainer</code>的列表。</p>
<ul>
<li>用字典列表初始化container</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">listdict_container = dcase_util.containers.ListDictContainer(</div><div class="line">    [</div><div class="line">        &#123;&apos;field1&apos;: 1, &apos;field2&apos;: 2&#125;,</div><div class="line">        &#123;&apos;field1&apos;: 10, &apos;field2&apos;: 20&#125;,</div><div class="line">        &#123;&apos;field1&apos;: 100, &apos;field2&apos;: 200&#125;,</div><div class="line">    ]</div><div class="line"></div><div class="line">)</div></pre></td></tr></table></figure>
<ul>
<li>根据键和值访问列表中的项目</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">print(listdict_container.search(key=&apos;field1&apos;, value=10))</div><div class="line"># DictContainer</div><div class="line">#   field1                            : 10</div><div class="line">#   field2                            : 20</div></pre></td></tr></table></figure>
<ul>
<li>得到字典中特定字段的值</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(ld.get_field(field_name=&apos;field2&apos;))</div><div class="line"># [2, 20, 200]</div></pre></td></tr></table></figure>
<h3 id="1-4-Data-Containers"><a href="#1-4-Data-Containers" class="headerlink" title="1.4 Data Containers"></a>1.4 Data Containers</h3><ul>
<li>其中三种是可用的几种数据容器类型：<ul>
<li><code>dcase_util.containers.DataArrayContainer</code>，数组数据的数据容器，内部数据存储在numpy.array中。（可用）</li>
<li><code>dcase_util.containers.DataMatrix2DContainer</code>，二维数据矩阵的数据容器，内部数据存储在二维numpy.ndarray中。（可用）</li>
<li>case_util.containers.DataMatrix3DContainer`，用于三维数据矩阵的数据容器，内部数据存储在3-D numpy.ndarray中。（可用）</li>
<li><code>dcase_util.containers.BinaryMatrixContainer</code>，用于二维二进制数据矩阵的数据容器，内部数据存储在二维numpy.ndarray中。（不可用）</li>
</ul>
</li>
<li>用随机矩阵10x100初始化container，并将时间分辨率设置为20ms：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">data_container = dcase_util.containers.DataMatrix2DContainer(</div><div class="line">  data=numpy.random.rand(10,100),</div><div class="line">  time_resolution=0.02</div><div class="line">)</div></pre></td></tr></table></figure>
<blockquote>
<p>当存储例如声学特征时，时间分辨率对应于特征提取帧跳长。</p>
</blockquote>
<ul>
<li>直接访问数据矩阵：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(data_container.data.shape)</div><div class="line"># (10, 100)</div></pre></td></tr></table></figure>
<ul>
<li>显示container信息</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">data_container.show()</div><div class="line"># DataMatrix2DContainer :: Class</div><div class="line">#   Data</div><div class="line">#     data                            : matrix (10,100)</div><div class="line">#     Dimensions</div><div class="line">#       time_axis                     : 1</div><div class="line">#       data_axis                     : 0</div><div class="line">#     Timing information</div><div class="line">#       time_resolution               : 0.02 sec</div><div class="line">#   Meta</div><div class="line">#     stats                           : Calculated</div><div class="line">#     metadata                        : -</div><div class="line">#     processing_chain                : -</div><div class="line">#   Duration</div><div class="line">#       Frames                        : 100</div><div class="line">#       Seconds                       : 2.00 sec</div></pre></td></tr></table></figure>
<blockquote>
<p>该容器具有聚焦机制，可灵活捕捉数据矩阵的一部分。 可以根据时间进行对焦（如果时间分辨率已定义，则以秒为单位），或基于帧ID。</p>
</blockquote>
<ul>
<li>使用焦点在0.5秒和1.0秒之间获取部分数据：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(data_container.set_focus(start_seconds=0.5, stop_seconds=1.0).get_focused().shape)</div><div class="line"># (10, 25)</div></pre></td></tr></table></figure>
<ul>
<li>使用焦点获取第10帧和第50帧之间的零件数据：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(data_container.set_focus(start=10, stop=50).get_focused().shape)</div><div class="line"># (10, 40)</div></pre></td></tr></table></figure>
<ul>
<li>重置焦点并访问完整的数据矩阵：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">data_container.reset_focus()</div><div class="line">print(data_container.get_focused().shape)</div><div class="line"># (10, 100)</div></pre></td></tr></table></figure>
<ul>
<li>访问帧1，2，10和30</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data_container.get_frames(frame_ids=[1,2,10,30])</div></pre></td></tr></table></figure>
<ul>
<li>访问帧1-5，每列只有第一个值：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data_container.get_frames(frame_ids=[1,2,3,4,5], vector_ids=[0])</div></pre></td></tr></table></figure>
<ul>
<li>转置矩阵：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">transposed_data = data_container.T</div><div class="line">print(transposed_data.shape)</div><div class="line"># (100, 10)</div></pre></td></tr></table></figure>
<ul>
<li>绘制数据：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data_container.plot()</div></pre></td></tr></table></figure>
<blockquote>
<p><code>dcase_util.containers.BinaryMatrixContainer</code>提供与<code>DataMatrix2DContainer</code>相同的用途，但是用于二进制内容。</p>
</blockquote>
<h3 id="1-5-存储库（Repositories）"><a href="#1-5-存储库（Repositories）" class="headerlink" title="1.5 存储库（Repositories）"></a>1.5 存储库（Repositories）</h3><p><code>dcase_util.containers.DataRepository</code>和<code>dcase_util.containers.FeatureRepository</code>是可用于存储多个其他数据容器的容器。 存储库存储具有两个级别信息的数据：标签和流。 标签是更高级别的密钥，流是第二级。</p>
<p>例如，可以使用储存库来储存与相同音频信号有关的多个不同声学特征。 流ID可用于存储从不同音频通道提取的特征。 后面的功能可以使用提取器标签和流ID进行访问。</p>
<ul>
<li>用数据初始化容器：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">data_repository = dcase_util.containers.DataRepository(</div><div class="line">    data=&#123;</div><div class="line">        &apos;label1&apos;: &#123;</div><div class="line">            &apos;stream0&apos;: &#123;</div><div class="line">                &apos;data&apos;: 100</div><div class="line">            &#125;,</div><div class="line">            &apos;stream1&apos;: &#123;</div><div class="line">                &apos;data&apos;: 200</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        &apos;label2&apos;: &#123;</div><div class="line">            &apos;stream0&apos;: &#123;</div><div class="line">                &apos;data&apos;: 300</div><div class="line">            &#125;,</div><div class="line">            &apos;stream1&apos;: &#123;</div><div class="line">                &apos;data&apos;: 400</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<ul>
<li>显示container信息:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">data_repository. show()</div><div class="line"># DataRepository :: Class</div><div class="line">#     Repository info</div><div class="line">#       Item class                    : DataMatrix2DContainer</div><div class="line">#       Item count                    : 2</div><div class="line">#       Labels                        : [&apos;label1&apos;, &apos;label2&apos;]</div><div class="line">#     Content</div><div class="line">#       [label1][stream1]             : &#123;&apos;data&apos;: 200&#125;</div><div class="line">#       [label1][stream0]             : &#123;&apos;data&apos;: 100&#125;</div><div class="line">#       [label2][stream1]             : &#123;&apos;data&apos;: 400&#125;</div><div class="line">#       [label2][stream0]             : &#123;&apos;data&apos;: 300&#125;</div></pre></td></tr></table></figure>
<ul>
<li>访问存储库中的数据：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">data_repository.get_container(label=&apos;label1&apos;,stream_id=&apos;stream1&apos;)</div><div class="line"># &#123;&apos;data&apos;: 200&#125;</div></pre></td></tr></table></figure>
<ul>
<li>设置数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">data_repository.set_container(label=&apos;label3&apos;,stream_id=&apos;stream0&apos;, container=&#123;&apos;data&apos;:500&#125;)</div><div class="line">data_repository. show()</div><div class="line"># DataRepository :: Class</div><div class="line">#     Repository info</div><div class="line">#       Item class                    : DataMatrix2DContainer</div><div class="line">#       Item count                    : 3</div><div class="line">#       Labels                        : [&apos;label1&apos;, &apos;label2&apos;, &apos;label3&apos;]</div><div class="line">#     Content</div><div class="line">#       [label1][stream1]             : &#123;&apos;data&apos;: 200&#125;</div><div class="line">#       [label1][stream0]             : &#123;&apos;data&apos;: 100&#125;</div><div class="line">#       [label2][stream1]             : &#123;&apos;data&apos;: 400&#125;</div><div class="line">#       [label2][stream0]             : &#123;&apos;data&apos;: 300&#125;</div><div class="line">#       [label3][stream0]             : &#123;&apos;data&apos;: 500&#125;</div></pre></td></tr></table></figure>
<h2 id="2-音频"><a href="#2-音频" class="headerlink" title="2. 音频"></a>2. 音频</h2><p><code>dcase_util.containers.AudioContainer</code>是多声道音频的数据容器。它读取多种格式（WAV，FLAC，M4A，WEBM）并写入WAV和FLAC文件。 直接从Youtube下载音频内容也受支持。</p>
<h3 id="2-1-创建container"><a href="#2-1-创建container" class="headerlink" title="2.1 创建container"></a>2.1 创建container</h3><ul>
<li>创建双通道的音频container</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">audio_container = dcase_util.containers.AudioContainer(fs=44100)</div><div class="line">t = numpy.linspace(0, 2, 2 * audio_container.fs, endpoint=False)</div><div class="line">x1 = numpy.sin(220 * 2 * numpy.pi * t)</div><div class="line">x2 = numpy.sin(440 * 2 * numpy.pi * t)</div><div class="line">audio_container.data = numpy.vstack([x1, x2])</div></pre></td></tr></table></figure>
<ul>
<li>显示的container信息</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># AudioContainer :: Class</div><div class="line">#  Sampling rate                     : 44100</div><div class="line">#     Channels                        : 2</div><div class="line">#   Duration</div><div class="line">#     Seconds                         : 2.00 sec</div><div class="line">#     Milliseconds                    : 2000.00 ms</div><div class="line">#     Samples                         : 88200 samples</div></pre></td></tr></table></figure>
<h3 id="2-2-加载和保存"><a href="#2-2-加载和保存" class="headerlink" title="2.2 加载和保存"></a>2.2 加载和保存</h3><ul>
<li><p>加载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">audio_container = dcase_util.containers.AudioContainer().load(</div><div class="line">  filename=dcase_util.utils.Example.audio_filename()</div><div class="line">)</div></pre></td></tr></table></figure>
</li>
<li><p>显示的container信息</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># AudioContainer :: Class</div><div class="line">#  Filename                          : acoustic_scene.flac</div><div class="line">#  Synced                            : Yes</div><div class="line">#  Sampling rate                     : 44100</div><div class="line">#    Channels                        : 2</div><div class="line">#  Duration</div><div class="line">#    Seconds                         : 10.00 sec</div><div class="line">#    Milliseconds                    : 10000.02 ms</div><div class="line">#    Samples                         : 441001 samples</div></pre></td></tr></table></figure>
<ul>
<li>从Youtube加载content </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">audio_container = dcase_util.containers.AudioContainer().load_from_youtube(</div><div class="line">  query_id=&apos;2ceUOv8A3FE&apos;,</div><div class="line">  start=1,</div><div class="line">  stop=5</div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="2-3-焦点段（Focus-segment）"><a href="#2-3-焦点段（Focus-segment）" class="headerlink" title="2.3 焦点段（Focus segment）"></a>2.3 焦点段（Focus segment）</h3><p>container具有聚焦机制，可灵活捕捉部分音频数据，同时保持完整的音频信号不变。 可以根据时间进行聚焦（如果时间分辨率已定义，则以秒为单位），或基于样本ID。 可以对单声道或混音（单声道）频道进行聚焦。 音频容器内容可以通过冻结来替代焦点细分。</p>
<ul>
<li>使用焦点在0.5秒和1.0秒之间获取部分数据：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(audio_container.set_focus(start_seconds=0.5, stop_seconds=1.0).get_focused().shape)</div><div class="line"># (2, 22050)</div></pre></td></tr></table></figure>
<ul>
<li>使用焦点从5秒开始持续2秒获取部分数据：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(audio_container.set_focus(start_seconds=5, duration_seconds=2.0).get_focused().shape)</div><div class="line"># (2, 88200)</div></pre></td></tr></table></figure>
<ul>
<li>使用焦点从5秒开始持续2秒获取部分数据，混合两个立体声声道：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(audio_container.set_focus(start_seconds=5, duration_seconds=2.0, channel=&apos;mixdown&apos;).get_focused().shape)</div><div class="line"># (88200,)</div></pre></td></tr></table></figure>
<ul>
<li>使用焦点从5秒开始2秒开始数取部分数据，在两个立体声通道左侧：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(audio_container.set_focus(start_seconds=5, duration_seconds=2.0, channel=&apos;left&apos;).get_focused().shape)</div><div class="line"># (88200,)</div></pre></td></tr></table></figure>
<ul>
<li>使用焦点从5秒开始2秒开始数取部分数据，秒音频通道（索引从0开始）：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(audio_container.set_focus(start_seconds=5, duration_seconds=2.0, channel=1).get_focused().shape)</div><div class="line"># (88200,)</div></pre></td></tr></table></figure>
<ul>
<li>使用焦点获取样本44100和88200之间的零件数据：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(audio_container.set_focus(start=44100, stop=88200).get_focused().shape)</div><div class="line"># (2, 44100)</div></pre></td></tr></table></figure>
<ul>
<li>重置焦点并访问完整的数据矩阵：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">audio_container.reset_focus()</div><div class="line">print(audio_container.get_focused().shape)</div><div class="line"># (2, 441001)</div></pre></td></tr></table></figure>
<ul>
<li>使用焦点从5秒开始2秒开始数取部分数据，，并冻结该部分</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">audio_container.set_focus(start_seconds=5, duration_seconds=2.0).freeze()</div><div class="line">print(audio_container.shape)</div><div class="line"># (2, 88200)</div></pre></td></tr></table></figure>
<h3 id="2-4-处理"><a href="#2-4-处理" class="headerlink" title="2.4 处理"></a>2.4 处理</h3><ul>
<li>正则化音频</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">audio_container.normalize()</div></pre></td></tr></table></figure>
<ul>
<li>对音频重采样到目标采样率：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">audio_container.resample(target_fs=16000)</div></pre></td></tr></table></figure>
<h3 id="2-5-可视化"><a href="#2-5-可视化" class="headerlink" title="2.5 可视化"></a>2.5 可视化</h3><ul>
<li>绘图波形：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">audio_container.plot_wave()</div></pre></td></tr></table></figure>
<ul>
<li>绘制频谱</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">audio_container.plot_spec()</div></pre></td></tr></table></figure>
<h2 id="3-声学特征"><a href="#3-声学特征" class="headerlink" title="3. 声学特征"></a>3. 声学特征</h2><p>库提供基本的声学特征提取器：<code>dcase_util.features.MelExtractor</code>，<code>dcase_util.features.MfccStaticExtractor</code>，<code>dcase_util.features.MfccDeltaExtractor</code>，<code>dcase_util.features.MfccAccelerationExtractor</code>，<code>dcase_util.features.ZeroCrossingRateExtractor</code>，<code>dcase_util.features.RMSEnergyExtractor</code>和<code>dcase_util.features.SpectralCentroidExtractor</code>。</p>
<h3 id="3-1-特征提取"><a href="#3-1-特征提取" class="headerlink" title="3.1 特征提取"></a>3.1 特征提取</h3><ul>
<li>为音频信号提取梅尔带能量（使用默认参数）：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># Get audio in a container, mixdown of a stereo signal</div><div class="line">audio_container = dcase_util.containers.AudioContainer().load(</div><div class="line">  filename=dcase_util.utils.Example.audio_filename()</div><div class="line">).mixdown()</div><div class="line"></div><div class="line"># Create extractor</div><div class="line">mel_extractor = dcase_util.features.MelExtractor()</div><div class="line"></div><div class="line"># Extract features</div><div class="line">mels = mel_extractor.extract(audio_container)</div></pre></td></tr></table></figure>
<ul>
<li>为特定音频段提取梅尔带能量：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"># Get audio in a container, mixdown of a stereo signal</div><div class="line">audio_container = dcase_util.containers.AudioContainer().load(</div><div class="line">  filename=dcase_util.utils.Example.audio_filename()</div><div class="line">).mixdown()</div><div class="line"></div><div class="line"># Set focus</div><div class="line">audio_container.set_focus(start_seconds=1.0, stop_seconds=4.0)</div><div class="line"></div><div class="line"># Create extractor</div><div class="line">mel_extractor = dcase_util.features.MelExtractor()</div><div class="line"></div><div class="line"># Extract features</div><div class="line">mels = mel_extractor.extract(audio_container.get_focused())</div><div class="line"></div><div class="line"># Plot</div><div class="line">dcase_util.containers.DataMatrix2DContainer(</div><div class="line">    data=mels,</div><div class="line">    time_resolution=mel_extractor.hop_length_seconds</div><div class="line">).plot()</div></pre></td></tr></table></figure>
<ul>
<li>直接从numpy矩阵中提取特征：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"># Create an audio signal</div><div class="line">t = numpy.linspace(0, 2, 2 * 44100, endpoint=False)</div><div class="line">x1 = numpy.sin(220 * 2 * numpy.pi * t)</div><div class="line"></div><div class="line"># Create extractor</div><div class="line">mel_extractor = dcase_util.features.MelExtractor()</div><div class="line"></div><div class="line"># Extract features</div><div class="line">mels = mel_extractor.extract(x1)</div><div class="line"></div><div class="line"># Plot</div><div class="line">dcase_util.containers.DataMatrix2DContainer(</div><div class="line">    data=mels,</div><div class="line">    time_resolution=mel_extractor.hop_length_seconds</div><div class="line">).plot()</div></pre></td></tr></table></figure>
<blockquote>
<p>库中提供的所有音频提取器适用于单声道音频。</p>
</blockquote>
<h3 id="3-2-可视化"><a href="#3-2-可视化" class="headerlink" title="3.2 可视化"></a>3.2 可视化</h3><ul>
<li>绘制提取的特征</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"># Get audio in a container, mixdown of a stereo signal</div><div class="line">audio_container = dcase_util.containers.AudioContainer().load(</div><div class="line">  filename=dcase_util.utils.Example.audio_filename()</div><div class="line">).mixdown()</div><div class="line"></div><div class="line"># Create extractor</div><div class="line">mel_extractor = dcase_util.features.MelExtractor()</div><div class="line"></div><div class="line"># Extract features</div><div class="line">mels = mel_extractor.extract(audio_container)</div><div class="line"></div><div class="line"># Plotting</div><div class="line">dcase_util.containers.DataMatrix2DContainer(</div><div class="line">    data=mels,</div><div class="line">    time_resolution=mel_extractor.hop_length_seconds</div><div class="line">).plot()</div></pre></td></tr></table></figure>
<h2 id="4-数据处理"><a href="#4-数据处理" class="headerlink" title="4. 数据处理"></a>4. 数据处理</h2><h3 id="4-1-数据操作"><a href="#4-1-数据操作" class="headerlink" title="4.1 数据操作"></a>4.1 数据操作</h3><p>有几个不同的实用程序来操作数据：</p>
<ul>
<li><code>dcase_util.data.Normalizer</code>，计算归一化因子和归一化数据。</li>
<li><code>dcase_util.data.RepositoryNormalizer</code>，一次性标准化数据存储库。</li>
<li><code>dcase_util.data.Aggregator</code>，聚合滑动处理窗口中的数据。</li>
<li><code>dcase_util.data.Sequence</code>r，对数据矩阵进行排序。</li>
<li><code>dcase_util.data.Stacker</code>，基于给定的矢量配方堆叠数据矩阵。</li>
<li><code>dcase_util.data.Selector</code>，根据具有开始和偏移量的事件选择数据的数据段。</li>
<li><code>dcase_util.data.Masker</code>，基于具有开始和偏移的事件来掩盖数据的数据段。</li>
</ul>
<h4 id="4-1-1-归一化"><a href="#4-1-1-归一化" class="headerlink" title="4.1.1 归一化"></a>4.1.1 归一化</h4><p><code>dcase_util.data.Normalizer</code>类可用于计算数据的归一化因子（平均值和标准偏差），而不一次读取所有数据。在小部分读取数据时累计中间统计数据。</p>
<ul>
<li>逐个文件计算归一化因子：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">data = dcase_util.utils.Example.feature_container()</div><div class="line"></div><div class="line"># Initialize normalizer</div><div class="line">normalizer = dcase_util.data.Normalizer()</div><div class="line"></div><div class="line"># Accumulate -- feed data per file in</div><div class="line">normalizer.accumulate(data=data)</div><div class="line"></div><div class="line"># After accumulation calculate normalization factors (mean + std)</div><div class="line">normalizer.finalize()</div><div class="line"></div><div class="line"># Save</div><div class="line">normalizer.save(filename=&apos;norm_factors.cpickle&apos;)</div><div class="line"></div><div class="line"># Load</div><div class="line">normalizer = dcase_util.data.Normalizer().load(filename=&apos;norm_factors.cpickle&apos;)</div></pre></td></tr></table></figure>
<ul>
<li>使用声明：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">data = dcase_util.utils.Example.feature_container()</div><div class="line"></div><div class="line"># Accumulate</div><div class="line">with dcase_util.data.Normalizer() as normalizer:</div><div class="line">    normalizer.accumulate(data=data)</div><div class="line"></div><div class="line"># Save</div><div class="line">normalizer.save(filename=&apos;norm_factors.cpickle&apos;)</div></pre></td></tr></table></figure>
<ul>
<li>用预先计算的值初始化标准化器（normalizer）：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">data = dcase_util.utils.Example.feature_container()</div><div class="line">normalizer = dcase_util.data.Normalizer(</div><div class="line">    **data.stats</div><div class="line">)</div></pre></td></tr></table></figure>
<ul>
<li>归一化数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">data = dcase_util.utils.Example.feature_container()</div><div class="line">normalizer = dcase_util.data.Normalizer().load(filename=&apos;norm_factors.cpickle&apos;)</div><div class="line">normalizer.normalize(data)</div></pre></td></tr></table></figure>
<h4 id="4-1-2-聚合（Aggregator）"><a href="#4-1-2-聚合（Aggregator）" class="headerlink" title="4.1.2 聚合（Aggregator）"></a>4.1.2 聚合（Aggregator）</h4><p>数据聚合器类（dcase_util.data.Aggregator）可用于在滑动处理窗口中处理数据矩阵。 这个处理阶段可以用来通过计算它们的平均值和标准偏差来折叠具有特定窗口长度的数据，或者将该矩阵平坦化为单个向量。</p>
<p>支持的处理方法：flatten、mean、std、cov、kurtosis、skew。所有这些处理方法都可以结合使用。</p>
<ul>
<li>计算分为10帧窗口的均值和标准差，以1帧跳跃（Calculating mean and standard deviation in 10 frame window, with 1 frame hop）：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">data = dcase_util.utils.Example.feature_container()</div><div class="line">print(data.shape)</div><div class="line"># (40, 501)</div><div class="line"></div><div class="line">data_aggregator = dcase_util.data.Aggregator(</div><div class="line">    recipe=[&apos;mean&apos;, &apos;std&apos;],</div><div class="line">    win_length_frames=10,</div><div class="line">    hop_length_frames=1,</div><div class="line">)</div><div class="line">data_aggregator.aggregate(data)</div><div class="line">print(data.shape)</div><div class="line"># (80, 501)</div></pre></td></tr></table></figure>
<ul>
<li>将具有10帧的数据矩阵压缩成一个单独的向量，具有1帧跳跃（with 1 frame hop）：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">data = dcase_util.utils.Example.feature_container()</div><div class="line">print(data.shape)</div><div class="line"># (40, 501)</div><div class="line"></div><div class="line">data_aggregator = dcase_util.data.Aggregator(</div><div class="line">    recipe=[&apos;flatten&apos;],</div><div class="line">    win_length_frames=10,</div><div class="line">    hop_length_frames=1,</div><div class="line">)</div><div class="line">data_aggregator.aggregate(data)</div><div class="line">print(data.shape)</div><div class="line"># (400, 501)</div></pre></td></tr></table></figure>
<h4 id="4-1-3-测序（Sequencing）"><a href="#4-1-3-测序（Sequencing）" class="headerlink" title="4.1.3 测序（Sequencing）"></a>4.1.3 测序（Sequencing）</h4><p>Sequencer类（dcase_util.data.Sequencer）将数据矩阵处理成序列（图像）。序列可以重叠，并且可以在调用之间改变排序网格（移位）。</p>
<ul>
<li>创建序列：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">data = dcase_util.utils.Example.feature_container()</div><div class="line">print(data.shape)</div><div class="line"># (40, 501)</div><div class="line">data_sequencer = dcase_util.data.Sequencer(</div><div class="line">    frames=10,</div><div class="line">    hop_length_frames=10</div><div class="line">)</div><div class="line">sequenced_data = data_sequencer.sequence(data)</div><div class="line">print(sequenced_data.shape)</div><div class="line"># (40, 10, 50)</div><div class="line"></div><div class="line">sequenced_data.show()</div><div class="line"># DataMatrix3DContainer :: Class</div><div class="line">#   Data</div><div class="line">#     data                            : matrix (40,10,50)</div><div class="line">#     Dimensions</div><div class="line">#       time_axis                     : 1</div><div class="line">#     Timing information</div><div class="line">#       time_resolution               : None</div><div class="line">#   Meta</div><div class="line">#     stats                           : Calculated</div><div class="line">#     metadata                        : -</div><div class="line">#     processing_chain                : -</div><div class="line">#   Duration</div><div class="line">#     Frames                          : 10</div><div class="line">#   Data</div><div class="line">#     Dimensions</div><div class="line">#       time_axis                     : 1</div><div class="line">#       data_axis                     : 0</div><div class="line">#       sequence_axis                 : 2</div></pre></td></tr></table></figure>
<h4 id="4-1-4-堆叠（Stacker）"><a href="#4-1-4-堆叠（Stacker）" class="headerlink" title="4.1.4 堆叠（Stacker）"></a>4.1.4 堆叠（Stacker）</h4><p>Stacker类（<code>dcase_util.data.Stacker</code>）根据配方堆叠存储在数据存储库中的数据。例如，可以使用此类创建包含使用多个特征提取器提取的数据的新特征矩阵。使用配方，您可以选择全矩阵，只有部分具有开始和结束索引的数据向量，或选择单个数据行。</p>
<p>例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"># Load data repository</div><div class="line">repo = dcase_util.utils.Example.feature_repository()</div><div class="line"></div><div class="line"># Show labels in the repository</div><div class="line">print(repo.labels)</div><div class="line"></div><div class="line"># Select full matrix from &apos;mel&apos; and with default stream (0) (40 mel bands).</div><div class="line">data = dcase_util.data.Stacker(recipe=&apos;mel&apos;).stack(repo)</div><div class="line">print(data.shape)</div><div class="line"># (40, 501)</div><div class="line"></div><div class="line"># Select full matrix from &apos;mel&apos; and define stream 0 (40 mel bands).</div><div class="line">data = dcase_util.data.Stacker(recipe=&apos;mel=0&apos;).stack(repo)</div><div class="line">print(data.shape)</div><div class="line"># (40, 501)</div><div class="line"></div><div class="line"># Select full matrix from &apos;mel&apos; and &apos;mfcc&apos; with default stream (0) (40 mel bands + 20 mfccs).</div><div class="line">data = dcase_util.data.Stacker(recipe=&apos;mel;mfcc&apos;).stack(repo)</div><div class="line">print(data.shape)</div><div class="line"># (60, 501)</div><div class="line"></div><div class="line"># Select data from &apos;mfcc&apos; matrix with default stream (0), and omit first coefficient (19 mfccs).</div><div class="line">data = dcase_util.data.Stacker(recipe=&apos;mfcc=1-19&apos;).stack(repo)</div><div class="line">print(data.shape)</div><div class="line"># (19, 501)</div><div class="line"></div><div class="line"># Select data from &apos;mfcc&apos; matrix with default stream (0), select coefficients 1,5,7 (3 mfccs).</div><div class="line">data = dcase_util.data.Stacker(recipe=&apos;mfcc=1,5,7&apos;).stack(repo)</div><div class="line">print(data.shape)</div><div class="line"># (3, 501)</div></pre></td></tr></table></figure>
<h3 id="4-2-数据编码"><a href="#4-2-数据编码" class="headerlink" title="4.2 数据编码"></a>4.2 数据编码</h3><p>数据编码器可用于将参考元数据转换为二进制矩阵。</p>
<ul>
<li>one hot<br>OneHotEncoder类（<code>dcase_util.data.OneHotEncoder</code>）可用于创建二进制矩阵，其中单个类在整个信号中处于活动状态。该编码器适用于多类单标签分类应用。</li>
</ul>
<p>例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"># Initilize encoder</div><div class="line">onehot_encoder = dcase_util.data.OneHotEncoder(</div><div class="line">    label_list=[&apos;class A&apos;,&apos;class B&apos;,&apos;class C&apos;],</div><div class="line">    time_resolution=0.02</div><div class="line">)</div><div class="line"></div><div class="line"># Encode</div><div class="line">binary_matrix = onehot_encoder.encode(</div><div class="line">    label=&apos;class B&apos;,</div><div class="line">    length_seconds=10.0</div><div class="line">)</div><div class="line"></div><div class="line"># Visualize</div><div class="line">binary_matrix.plot()</div></pre></td></tr></table></figure>
<ul>
<li>Many-hot<br>ManyHotEncoder类（<code>dcase_util.data.ManyHotEncoder</code>）可用于创建二进制矩阵，其中多个类在整个信号中处于活动状态。 该编码器适用于多类多标签分类应用，如音频标签。</li>
</ul>
<p>例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"># Initilize encoder</div><div class="line">manyhot_encoder = dcase_util.data.ManyHotEncoder(</div><div class="line">    label_list=[&apos;class A&apos;,&apos;class B&apos;,&apos;class C&apos;],</div><div class="line">    time_resolution=0.02</div><div class="line">)</div><div class="line"></div><div class="line"># Encode</div><div class="line">binary_matrix = manyhot_encoder.encode(</div><div class="line">    label_list=[&apos;class A&apos;, &apos;class B&apos;],</div><div class="line">    length_seconds=10.0</div><div class="line">)</div><div class="line"></div><div class="line"># Visualize</div><div class="line">binary_matrix.plot()</div></pre></td></tr></table></figure>
<ul>
<li>事件滚动（Event roll）</li>
</ul>
<p>EventRollEncoder类（dcase_util.data.EventRollEncoder）可用于创建二进制矩阵，其中多个事件在指定的时间段内处于活动状态。 该编码器适用于事件检测应用。</p>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"># Metadata</div><div class="line">meta = dcase_util.containers.MetaDataContainer([</div><div class="line">    &#123;</div><div class="line">        &apos;filename&apos;: &apos;test1.wav&apos;,</div><div class="line">        &apos;event_label&apos;: &apos;cat&apos;,</div><div class="line">        &apos;onset&apos;: 1.0,</div><div class="line">        &apos;offset&apos;: 3.0</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        &apos;filename&apos;: &apos;test1.wav&apos;,</div><div class="line">        &apos;event_label&apos;: &apos;dog&apos;,</div><div class="line">        &apos;onset&apos;: 2.0,</div><div class="line">        &apos;offset&apos;: 6.0</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        &apos;filename&apos;: &apos;test1.wav&apos;,</div><div class="line">        &apos;event_label&apos;: &apos;speech&apos;,</div><div class="line">        &apos;onset&apos;: 5.0,</div><div class="line">        &apos;offset&apos;: 8.0</div><div class="line">    &#125;,</div><div class="line">])</div><div class="line"></div><div class="line"># Initilize encoder</div><div class="line">event_roll_encoder = dcase_util.data.EventRollEncoder(</div><div class="line">    label_list=meta.unique_event_labels,</div><div class="line">    time_resolution=0.02</div><div class="line">)</div><div class="line"></div><div class="line"># Encode</div><div class="line">event_roll = event_roll_encoder.encode(</div><div class="line">    metadata_container=meta,</div><div class="line">    length_seconds=10.0</div><div class="line">)</div><div class="line"></div><div class="line"># Visualize</div><div class="line">event_roll.plot()</div></pre></td></tr></table></figure>
<h2 id="5-Metadata"><a href="#5-Metadata" class="headerlink" title="5. Metadata"></a>5. Metadata</h2><p>Library提供容器dcase_util.containers.MetaDataContainer，用于处理来自大多数DCASE相关应用程序区域的元数据：声场景分类，事件检测和音频标记。</p>
<p>原则上，元数据是一个包含元项目字典的列表，它可以像普通列表一样使用。</p>
<h3 id="5-1-创建容器-container"><a href="#5-1-创建容器-container" class="headerlink" title="5.1 创建容器(container)"></a>5.1 创建容器(container)</h3><ul>
<li><p>用声场列表初始化元数据容器：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">meta_container_scenes = dcase_util.containers.MetaDataContainer(</div><div class="line">    [</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file1.wav&apos;,</div><div class="line">            &apos;scene_label&apos;: &apos;office&apos;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file2.wav&apos;,</div><div class="line">            &apos;scene_label&apos;: &apos;street&apos;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file3.wav&apos;,</div><div class="line">            &apos;scene_label&apos;: &apos;home&apos;</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">)</div></pre></td></tr></table></figure>
</li>
<li><p>用声音事件列表初始化元数据容器：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">meta_container_events = dcase_util.containers.MetaDataContainer(</div><div class="line">    [</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file1.wav&apos;,</div><div class="line">            &apos;event_label&apos;: &apos;speech&apos;,</div><div class="line">            &apos;onset&apos;: 10.0,</div><div class="line">            &apos;offset&apos;: 15.0,</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file1.wav&apos;,</div><div class="line">            &apos;event_label&apos;: &apos;footsteps&apos;,</div><div class="line">            &apos;onset&apos;: 23.0,</div><div class="line">            &apos;offset&apos;: 26.0,</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file2.wav&apos;,</div><div class="line">            &apos;event_label&apos;: &apos;speech&apos;,</div><div class="line">            &apos;onset&apos;: 2.0,</div><div class="line">            &apos;offset&apos;: 5.0,</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">)</div></pre></td></tr></table></figure>
<ul>
<li>用标签初始化元数据容器：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">meta_container_tags = dcase_util.containers.MetaDataContainer(</div><div class="line">    [</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file1.wav&apos;,</div><div class="line">            &apos;tags&apos;: [&apos;cat&apos;,&apos;dog&apos;]</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file2.wav&apos;,</div><div class="line">         &apos;tags&apos;: [&apos;dog&apos;]</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file3.wav&apos;,</div><div class="line">            &apos;tags&apos;: [&apos;dog&apos;,&apos;horse&apos;]</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">)</div></pre></td></tr></table></figure>
<ul>
<li>显示内容</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">meta_container_scenes.show()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Items                             : 3</div><div class="line">#   Unique</div><div class="line">#     Files                           : 3</div><div class="line">#     Scene labels                    : 3</div><div class="line">#     Event labels                    : 0</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Scene statistics</div><div class="line">#         Scene label             Count</div><div class="line">#         --------------------   ------</div><div class="line">#         home                        1</div><div class="line">#         office                      1</div><div class="line">#         street                      1</div><div class="line"></div><div class="line">meta_container_events.show()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Items                             : 3</div><div class="line">#   Unique</div><div class="line">#     Files                           : 2</div><div class="line">#     Scene labels                    : 0</div><div class="line">#     Event labels                    : 2</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Event statistics</div><div class="line">#         Event label             Count   Tot. Length   Avg. Length</div><div class="line">#         --------------------   ------   -----------   -----------</div><div class="line">#         footsteps                   1          3.00          3.00</div><div class="line">#         speech                      2          8.00          4.00</div><div class="line"></div><div class="line">meta_container_tags.show()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Items                             : 3</div><div class="line">#   Unique</div><div class="line">#     Files                           : 3</div><div class="line">#     Scene labels                    : 0</div><div class="line">#     Event labels                    : 0</div><div class="line">#     Tags                            : 3</div><div class="line">#</div><div class="line">#   Tag statistics</div><div class="line">#         Tag                     Count</div><div class="line">#         --------------------   ------</div><div class="line">#         cat                         1</div><div class="line">#         dog                         3</div><div class="line">#         horse                       1</div></pre></td></tr></table></figure>
<ul>
<li>显示内容和每个元数据项目：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">meta_container_scenes.show_all()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Items                             : 3</div><div class="line">#   Unique</div><div class="line">#     Files                           : 3</div><div class="line">#     Scene labels                    : 3</div><div class="line">#     Event labels                    : 0</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Meta data</div><div class="line">#         Source                  Onset   Offset   Scene             Event             Tags              Identifier</div><div class="line">#         --------------------   ------   ------   ---------------   ---------------   ---------------   -----</div><div class="line">#         file1.wav                   -        -   office            -                 -                 -</div><div class="line">#         file2.wav                   -        -   street            -                 -                 -</div><div class="line">#         file3.wav                   -        -   home              -                 -                 -</div><div class="line">#</div><div class="line">#   Scene statistics</div><div class="line">#         Scene label             Count</div><div class="line">#         --------------------   ------</div><div class="line">#         home                        1</div><div class="line">#         office                      1</div><div class="line">#         street                      1</div><div class="line"></div><div class="line">meta_container_events.show_all()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Items                             : 3</div><div class="line">#   Unique</div><div class="line">#     Files                           : 2</div><div class="line">#     Scene labels                    : 0</div><div class="line">#     Event labels                    : 2</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Meta data</div><div class="line">#         Source                  Onset   Offset   Scene             Event             Tags              Identifier</div><div class="line">#         --------------------   ------   ------   ---------------   ---------------   ---------------   -----</div><div class="line">#         file1.wav               10.00    15.00   -                 speech            -                 -</div><div class="line">#         file1.wav               23.00    26.00   -                 footsteps         -                 -</div><div class="line">#         file2.wav                2.00     5.00   -                 speech            -                 -</div><div class="line">#</div><div class="line">#   Event statistics</div><div class="line">#         Event label             Count   Tot. Length   Avg. Length</div><div class="line">#         --------------------   ------   -----------   -----------</div><div class="line">#         footsteps                   1          3.00          3.00</div><div class="line">#         speech                      2          8.00          4.00</div></pre></td></tr></table></figure>
<h3 id="5-2-加载和保存"><a href="#5-2-加载和保存" class="headerlink" title="5.2 加载和保存"></a>5.2 加载和保存</h3><ul>
<li>将元数据保存到文件中：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">meta_container_events.save(filename=&apos;events.txt&apos;)</div></pre></td></tr></table></figure>
<ul>
<li>从注释文件加载元数据：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">meta_container_events = dcase_util.containers.MetaDataContainer().load(</div><div class="line">    filename=&apos;events.txt&apos;</div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="5-3-访问数据"><a href="#5-3-访问数据" class="headerlink" title="5.3 访问数据"></a>5.3 访问数据</h3><ul>
<li>获取元数据中提及的音频文件及其数量：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">print(meta_container_events.unique_files)</div><div class="line"># [&apos;file1.wav&apos;, &apos;file2.wav&apos;]</div><div class="line"></div><div class="line">print(meta_container_events.file_count)</div><div class="line"># 2</div></pre></td></tr></table></figure>
<ul>
<li>获取独特的场景标签及其数量：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">print(meta_container_scenes.unique_scene_labels)</div><div class="line"># [&apos;home&apos;, &apos;office&apos;, &apos;street&apos;]</div><div class="line"></div><div class="line">print(meta_container_scenes.scene_label_count)</div><div class="line"># 3</div></pre></td></tr></table></figure>
<ul>
<li>获取元数据中使用的特定事件标签及其数量：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">print(meta_container_events.unique_event_labels)</div><div class="line"># [&apos;footsteps&apos;, &apos;speech&apos;]</div><div class="line"></div><div class="line">print(meta_container_scenes.event_label_count)</div></pre></td></tr></table></figure>
<ul>
<li>获取元数据中使用的独特标签及其数量：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">print(meta_container_tags.unique_tags)</div><div class="line"># [&apos;cat&apos;, &apos;dog&apos;, &apos;horse&apos;]</div><div class="line"></div><div class="line">print(meta_container_tags.tag_count)</div><div class="line"># 3</div></pre></td></tr></table></figure>
<h3 id="5-4-过滤（Filtering）"><a href="#5-4-过滤（Filtering）" class="headerlink" title="5.4  过滤（Filtering）"></a>5.4  过滤（Filtering）</h3><ul>
<li>基于文件名过滤元数据：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">filtered = meta_container_events.filter(filename=&apos;file1.wav&apos;)</div><div class="line">filtered.show_all()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Items                             : 2</div><div class="line">#   Unique</div><div class="line">#     Files                           : 1</div><div class="line">#     Scene labels                    : 0</div><div class="line">#     Event labels                    : 2</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Meta data</div><div class="line">#         Source                  Onset   Offset   Scene             Event             Tags              Identifier</div><div class="line">#         --------------------   ------   ------   ---------------   ---------------   ---------------   -----</div><div class="line">#         file1.wav               10.00    15.00   -                 speech            -                 -</div><div class="line">#         file1.wav               23.00    26.00   -                 footsteps         -                 -</div><div class="line">#</div><div class="line">#   Event statistics</div><div class="line">#         Event label             Count   Tot. Length   Avg. Length</div><div class="line">#         --------------------   ------   -----------   -----------</div><div class="line">#         footsteps                   1          3.00          3.00</div><div class="line">#         speech                      1          5.00          5.00</div></pre></td></tr></table></figure>
<ul>
<li>基于事件标签过滤元数据：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">filtered = meta_container_events.filter(event_label=&apos;speech&apos;)</div><div class="line">filtered.show_all()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Items                             : 2</div><div class="line">#   Unique</div><div class="line">#     Files                           : 2</div><div class="line">#     Scene labels                    : 0</div><div class="line">#     Event labels                    : 1</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Meta data</div><div class="line">#         Source                  Onset   Offset   Scene             Event             Tags              Identifier</div><div class="line">#         --------------------   ------   ------   ---------------   ---------------   ---------------   -----</div><div class="line">#         file1.wav               10.00    15.00   -                 speech            -                 -</div><div class="line">#         file2.wav                2.00     5.00   -                 speech            -                 -</div><div class="line">#</div><div class="line">#   Event statistics</div><div class="line">#         Event label             Count   Tot. Length   Avg. Length</div><div class="line">#         --------------------   ------   -----------   -----------</div><div class="line">#         speech                      2          8.00          4.00</div></pre></td></tr></table></figure>
<ul>
<li>基于文件和事件标签过滤元数据：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">filtered = meta_container_events.filter(filename=&apos;file1.wav&apos;, event_label=&apos;speech&apos;)</div><div class="line">filtered.show_all()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Items                             : 1</div><div class="line">#   Unique</div><div class="line">#     Files                           : 1</div><div class="line">#     Scene labels                    : 0</div><div class="line">#     Event labels                    : 1</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Meta data</div><div class="line">#         Source                  Onset   Offset   Scene             Event             Tags              Identifier</div><div class="line">#         --------------------   ------   ------   ---------------   ---------------   ---------------   -----</div><div class="line">#         file1.wav               10.00    15.00   -                 speech            -                 -</div><div class="line">#</div><div class="line">#   Event statistics</div><div class="line">#         Event label             Count   Tot. Length   Avg. Length</div><div class="line">#         --------------------   ------   -----------   -----------</div><div class="line">#         speech                      1          5.00          5.00</div></pre></td></tr></table></figure>
<ul>
<li>基于时间段过滤，并使段开始新的零时间：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">filtered = meta_container_events.filter_time_segment(filename=&apos;file1.wav&apos;, start=12, stop=24)</div><div class="line">filtered.show_all()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Items                             : 2</div><div class="line">#   Unique</div><div class="line">#     Files                           : 1</div><div class="line">#     Scene labels                    : 0</div><div class="line">#     Event labels                    : 2</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Meta data</div><div class="line">#         Source                  Onset   Offset   Scene             Event             Tags              Identifier</div><div class="line">#         --------------------   ------   ------   ---------------   ---------------   ---------------   -----</div><div class="line">#         file1.wav                0.00     3.00   -                 speech            -                 -</div><div class="line">#         file1.wav               11.00    12.00   -                 footsteps         -                 -</div><div class="line">#</div><div class="line">#   Event statistics</div><div class="line">#         Event label             Count   Tot. Length   Avg. Length</div><div class="line">#         --------------------   ------   -----------   -----------</div><div class="line">#         footsteps                   1          1.00          1.00</div><div class="line">#         speech                      1          3.00          3.00</div></pre></td></tr></table></figure>
<h3 id="5-5-处理（Processing）"><a href="#5-5-处理（Processing）" class="headerlink" title="5.5 处理（Processing）"></a>5.5 处理（Processing）</h3><ul>
<li>将时间偏移量添加到元数据项中设置的开始和偏移量：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">meta_container_events.add_time(time=10)</div><div class="line">meta_container_events.show_all()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Items                             : 3</div><div class="line">#   Unique</div><div class="line">#     Files                           : 2</div><div class="line">#     Scene labels                    : 0</div><div class="line">#     Event labels                    : 2</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Meta data</div><div class="line">#         Source                  Onset   Offset   Scene             Event             Tags              Identifier</div><div class="line">#         --------------------   ------   ------   ---------------   ---------------   ---------------   -----</div><div class="line">#         file1.wav               20.00    25.00   -                 speech            -                 -</div><div class="line">#         file1.wav               33.00    36.00   -                 footsteps         -                 -</div><div class="line">#         file2.wav               12.00    15.00   -                 speech            -                 -</div><div class="line">#</div><div class="line">#   Event statistics</div><div class="line">#         Event label             Count   Tot. Length   Avg. Length</div><div class="line">#         --------------------   ------   -----------   -----------</div><div class="line">#         footsteps                   1          3.00          3.00</div><div class="line">#         speech                      2          8.00          4.00</div></pre></td></tr></table></figure>
<ul>
<li>删除非常短的事件并合并它们之间有小间隙的事件（相同的事件标签）：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">meta_container_events = dcase_util.containers.MetaDataContainer(</div><div class="line">    [</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file1.wav&apos;,</div><div class="line">            &apos;event_label&apos;: &apos;speech&apos;,</div><div class="line">            &apos;onset&apos;: 1.0,</div><div class="line">            &apos;offset&apos;: 2.0,</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file1.wav&apos;,</div><div class="line">            &apos;event_label&apos;: &apos;speech&apos;,</div><div class="line">            &apos;onset&apos;: 2.05,</div><div class="line">            &apos;offset&apos;: 2.5,</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file1.wav&apos;,</div><div class="line">            &apos;event_label&apos;: &apos;speech&apos;,</div><div class="line">            &apos;onset&apos;: 5.1,</div><div class="line">            &apos;offset&apos;: 5.15,</div><div class="line">        &#125;,</div><div class="line">    ]</div><div class="line">)</div><div class="line">processed = meta_container_events.process_events(minimum_event_length=0.2, minimum_event_gap=0.1)</div><div class="line">processed.show_all()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Items                             : 1</div><div class="line">#   Unique</div><div class="line">#     Files                           : 1</div><div class="line">#     Scene labels                    : 0</div><div class="line">#     Event labels                    : 1</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Meta data</div><div class="line">#         Source                  Onset   Offset   Scene             Event             Tags              Identifier</div><div class="line">#         --------------------   ------   ------   ---------------   ---------------   ---------------   -----</div><div class="line">#         file1.wav                1.00     2.50   -                 speech            -                 -</div><div class="line">#</div><div class="line">#   Event statistics</div><div class="line">#         Event label             Count   Tot. Length   Avg. Length</div><div class="line">#         --------------------   ------   -----------   -----------</div><div class="line">#        speech                      1          1.50          1.50</div></pre></td></tr></table></figure>
<h3 id="5-6-事件滚动（Event-roll）"><a href="#5-6-事件滚动（Event-roll）" class="headerlink" title="5.6 事件滚动（Event roll）"></a>5.6 事件滚动（Event roll）</h3><p>将事件列表转换为事件滚动（具有事件活动的二进制矩阵）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">meta_container_events = dcase_util.containers.MetaDataContainer(</div><div class="line">    [</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file1.wav&apos;,</div><div class="line">            &apos;event_label&apos;: &apos;speech&apos;,</div><div class="line">            &apos;onset&apos;: 1.0,</div><div class="line">            &apos;offset&apos;: 2.0,</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file1.wav&apos;,</div><div class="line">            &apos;event_label&apos;: &apos;speech&apos;,</div><div class="line">            &apos;onset&apos;: 2.05,</div><div class="line">            &apos;offset&apos;: 2.5,</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file1.wav&apos;,</div><div class="line">            &apos;event_label&apos;: &apos;speech&apos;,</div><div class="line">            &apos;onset&apos;: 5.1,</div><div class="line">            &apos;offset&apos;: 5.15,</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file1.wav&apos;,</div><div class="line">            &apos;event_label&apos;: &apos;footsteps&apos;,</div><div class="line">            &apos;onset&apos;: 3.1,</div><div class="line">            &apos;offset&apos;: 4.15,</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            &apos;filename&apos;: &apos;file1.wav&apos;,</div><div class="line">            &apos;event_label&apos;: &apos;dog&apos;,</div><div class="line">            &apos;onset&apos;: 2.6,</div><div class="line">            &apos;offset&apos;: 3.6,</div><div class="line">        &#125;,</div><div class="line">    ]</div><div class="line">)</div><div class="line">event_roll = meta_container_events.to_event_roll()</div><div class="line"></div><div class="line"># Plot</div><div class="line">event_roll.plot()</div></pre></td></tr></table></figure>
<h2 id="6-Datasets"><a href="#6-Datasets" class="headerlink" title="6. Datasets"></a>6. Datasets</h2><p>数据库类提供在库中为许多不同组织的音频数据集创建统一的接口。数据集将在第一次使用时下载，提取并准备好使用情况。</p>
<p>提供了四种类型的数据集：</p>
<ul>
<li>声场景数据集，从<code>dcase_util.datasets.AcousticSceneDataset</code>类继承的类。</li>
<li>声音事件数据集，从<code>dcase_util.datasets.SoundEventDataset</code>类继承的类。</li>
<li>声音事件数据集合成数据创建，从<code>dcase_util.datasets.SyntheticSoundEventDataset</code>类继承的类。</li>
<li>音频标记数据集，从<code>dcase_util.datasets.AudioTaggingDataset</code>类继承的类。</li>
</ul>
<p>获取所有可用数据集的列表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">print(dcase_util.datasets.dataset_list())</div><div class="line">#  Dataset list</div><div class="line">#  Class Name                                 | Group | Remote | Local  | Audio | Scenes | Events | Tags</div><div class="line">#  ------------------------------------------ | ----- | ------ | ------ | ----- | ------ | ------ | ----</div><div class="line">#  DCASE2013_Scenes_DevelopmentSet            | scene | 344 MB | 849 MB | 100   | 10     |        |</div><div class="line">#  TUTAcousticScenes_2016_DevelopmentSet      | scene | 7 GB   | 23 GB  | 1170  | 15     |        |</div><div class="line">#  TUTAcousticScenes_2016_EvaluationSet       | scene | 2 GB   | 5 GB   | 390   | 15     |        |</div><div class="line">#  TUTAcousticScenes_2017_DevelopmentSet      | scene | 9 GB   | 21 GB  | 4680  | 15     |        |</div><div class="line">#  TUTAcousticScenes_2017_EvaluationSet       | scene | 3 GB   | 7 GB   |       |        |        |</div><div class="line">#  DCASE2017_Task4tagging_DevelopmentSet      | event | 5 MB   | 24 GB  | 56700 | 1      | 17     |</div><div class="line">#  DCASE2017_Task4tagging_EvaluationSet       | event | 823 MB | 1 GB   |       |        |        |</div><div class="line">#  TUTRareSoundEvents_2017_DevelopmentSet     | event | 7 GB   | 28 GB  |       |        | 3      |</div><div class="line">#  TUTRareSoundEvents_2017_EvaluationSet      | event | 4 GB   | 4 GB   |       |        | 3      |</div><div class="line">#  TUTSoundEvents_2016_DevelopmentSet         | event | 967 MB | 2 GB   | 954   | 2      | 17     |</div><div class="line">#  TUTSoundEvents_2016_EvaluationSet          | event | 449 MB | 989 MB | 511   | 2      | 17     |</div><div class="line">#  TUTSoundEvents_2017_DevelopmentSet         | event | 1 GB   | 2 GB   | 659   | 1      | 6      |</div><div class="line">#  TUTSoundEvents_2017_EvaluationSet          | event | 370 MB | 798 MB |       |        |        |</div><div class="line">#  TUT_SED_Synthetic_2016                     | event | 4 GB   | 5 GB   |       |        |        |</div><div class="line">#  CHiMEHome_DomesticAudioTag_DevelopmentSet  | tag   | 3 GB   | 9 GB   | 1946  | 1      |        | 7</div></pre></td></tr></table></figure>
<h3 id="6-1-初始化数据集"><a href="#6-1-初始化数据集" class="headerlink" title="6.1  初始化数据集"></a>6.1  初始化数据集</h3><p>要下载，提取和准备数据集（在这种情况下，数据集将放置在临时目录中，并且只下载与元数据相关的文件）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">import tempfile</div><div class="line"></div><div class="line">db = dcase_util.datasets.TUTAcousticScenes_2016_DevelopmentSet(</div><div class="line">    data_path=tempfile.gettempdir(),</div><div class="line">    included_content_types=[&apos;meta&apos;]</div><div class="line">)</div><div class="line">db.initialize()</div><div class="line">db.show()</div><div class="line"># DictContainer :: Class</div><div class="line">#   audio_source                      : Field recording</div><div class="line">#   audio_type                        : Natural</div><div class="line">#   authors                           : Annamaria Mesaros, Toni Heittola, and Tuomas Virtanen</div><div class="line">#   licence                           : free non-commercial</div><div class="line">#   microphone_model                  : Soundman OKM II Klassik/studio A3 electret microphone</div><div class="line">#   recording_device_model            : Roland Edirol R-09</div><div class="line">#   title                             : TUT Acoustic Scenes 2016, development dataset</div><div class="line">#   url                               : https://zenodo.org/record/45739</div><div class="line">#</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Filename                          : /tmp/TUT-acoustic-scenes-2016-development/meta.txt</div><div class="line">#   Items                             : 1170</div><div class="line">#   Unique</div><div class="line">#     Files                           : 1170</div><div class="line">#     Scene labels                    : 15</div><div class="line">#     Event labels                    : 0</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Scene statistics</div><div class="line">#         Scene label             Count</div><div class="line">#         --------------------   ------</div><div class="line">#         beach                      78</div><div class="line">#         bus                        78</div><div class="line">#         cafe/restaurant            78</div><div class="line">#         car                        78</div><div class="line">#         city_center                78</div><div class="line">#         forest_path                78</div><div class="line">#         grocery_store              78</div><div class="line">#         home                       78</div><div class="line">#         library                    78</div><div class="line">#         metro_station              78</div><div class="line">#         office                     78</div><div class="line">#         park                       78</div><div class="line">#         residential_area           78</div><div class="line">#         train                      78</div><div class="line">#         tram                       78</div></pre></td></tr></table></figure>
<h3 id="6-2-交叉验证步骤"><a href="#6-2-交叉验证步骤" class="headerlink" title="6.2 交叉验证步骤"></a>6.2 交叉验证步骤</h3><p>通常数据集通过交叉验证设置提供。</p>
<p>获得fold训练材料1：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">training_material = db.train(fold=1)</div><div class="line">training_material.show()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Filename                          : /tmp/TUT-acoustic-scenes-2016-development/evaluation_setup/fold1_train.txt</div><div class="line">#   Items                             : 880</div><div class="line">#   Unique</div><div class="line">#     Files                           : 880</div><div class="line">#     Scene labels                    : 15</div><div class="line">#     Event labels                    : 0</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Scene statistics</div><div class="line">#         Scene label             Count</div><div class="line">#         --------------------   ------</div><div class="line">#         beach                      59</div><div class="line">#         bus                        59</div><div class="line">#         cafe/restaurant            60</div><div class="line">#         car                        58</div><div class="line">#         city_center                60</div><div class="line">#         forest_path                57</div><div class="line">#         grocery_store              59</div><div class="line">#         home                       56</div><div class="line">#         library                    57</div><div class="line">#         metro_station              59</div><div class="line">#         office                     59</div><div class="line">#         park                       58</div><div class="line">#         residential_area           59</div><div class="line">#         train                      60</div><div class="line">#         tram                       60</div></pre></td></tr></table></figure>
<ul>
<li>获取fold1的测试材料（无参考数据的材料）：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">testing_material = db.test(fold=1)</div><div class="line">testing_material.show()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Filename                          : /tmp/TUT-acoustic-scenes-2016-development/evaluation_setup/fold1_test.txt</div><div class="line">#   Items                             : 290</div><div class="line">#   Unique</div><div class="line">#     Files                           : 290</div><div class="line">#     Scene labels                    : 0</div><div class="line">#     Event labels                    : 0</div><div class="line">#     Tags                            : 0</div></pre></td></tr></table></figure>
<ul>
<li>使用完整的参考数据获取fold1的测试材料：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">eval_material = db.eval(fold=1)</div><div class="line">eval_material.show()</div><div class="line"></div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Filename                          : /tmp/TUT-acoustic-scenes-2016-development/evaluation_setup/fold1_evaluate.txt</div><div class="line">#   Items                             : 290</div><div class="line">#   Unique</div><div class="line">#     Files                           : 290</div><div class="line">#     Scene labels                    : 15</div><div class="line">#     Event labels                    : 0</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Scene statistics</div><div class="line">#         Scene label             Count</div><div class="line">#         --------------------   ------</div><div class="line">#         beach                      19</div><div class="line">#         bus                        19</div><div class="line">#         cafe/restaurant            18</div><div class="line">#         car                        20</div><div class="line">#         city_center                18</div><div class="line">#         forest_path                21</div><div class="line">#         grocery_store              19</div><div class="line">#         home                       22</div><div class="line">#         library                    21</div><div class="line">#         metro_station              19</div><div class="line">#         office                     19</div><div class="line">#         park                       20</div><div class="line">#         residential_area           19</div><div class="line">#         train                      18</div><div class="line">#         tram                       18</div></pre></td></tr></table></figure>
<ul>
<li>要将所有数据集合折叠为无：（To get all data set fold to None）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">all_material = db.train(fold=None)</div><div class="line">all_material.show()</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Filename                          : /tmp/TUT-acoustic-scenes-2016-development/meta.txt</div><div class="line">#   Items                             : 1170</div><div class="line">#   Unique</div><div class="line">#     Files                           : 1170</div><div class="line">#     Scene labels                    : 15</div><div class="line">#     Event labels                    : 0</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Scene statistics</div><div class="line">#         Scene label             Count</div><div class="line">#         --------------------   ------</div><div class="line">#         beach                      78</div><div class="line">#         bus                        78</div><div class="line">#         cafe/restaurant            78</div><div class="line">#         car                        78</div><div class="line">#         city_center                78</div><div class="line">#         forest_path                78</div><div class="line">#         grocery_store              78</div><div class="line">#         home                       78</div><div class="line">#         library                    78</div><div class="line">#         metro_station              78</div><div class="line">#         office                     78</div><div class="line">#         park                       78</div><div class="line">#         residential_area           78</div><div class="line">#         train                      78</div><div class="line">#         tram                       78</div></pre></td></tr></table></figure>
<ul>
<li>迭代所有fold：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">for fold in db.folds:</div><div class="line">    train_material = db.train(fold=fold)</div></pre></td></tr></table></figure>
<p>大多数数据集不提供验证集拆分。 但是，数据集类提供了几种方法从训练集中生成它，同时保持数据统计数据并确保在训练集和验证集中不会有来自同一源的数据。</p>
<p>为fold1生成平衡的验证集（平衡完成，以便将来自相同位置的记录分配给同一集）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">training_files, validation_files = db.validation_split(</div><div class="line">    fold=1,</div><div class="line">    split_type=&apos;balanced&apos;,</div><div class="line">    validation_amount=0.3</div><div class="line">)</div></pre></td></tr></table></figure>
<ul>
<li>为fold1生成随机验证集（不平衡）：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">training_files, validation_files = db.validation_split(</div><div class="line">    fold=1,</div><div class="line">    split_type=&apos;random&apos;,</div><div class="line">    validation_amount=0.3</div><div class="line">)</div></pre></td></tr></table></figure>
<ul>
<li>获取数据集提供的验证集（示例中使用的数据集不提供它，这会引发错误。）：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">training_files, validation_files = db.validation_split(</div><div class="line">    fold=1,</div><div class="line">    split_type=&apos;dataset&apos;</div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="6-3-元数据（Meta-data）"><a href="#6-3-元数据（Meta-data）" class="headerlink" title="6.3 元数据（Meta data）"></a>6.3 元数据（Meta data）</h3><ul>
<li>获取与该文件关联的元数据：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">items = db.file_meta(filename=&apos;audio/b086_150_180.wav&apos;)</div><div class="line">print(items)</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Items                             : 1</div><div class="line">#   Unique</div><div class="line">#     Files                           : 1</div><div class="line">#     Scene labels                    : 1</div><div class="line">#     Event labels                    : 0</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Meta data</div><div class="line">#         Source                  Onset   Offset   Scene             Event             Tags              Identifier</div><div class="line">#         --------------------   ------   ------   ---------------   ---------------   ---------------   -----</div><div class="line">#         audio/b086_150_180..        -        -   grocery_store     -                 -                 -</div><div class="line">#</div><div class="line">#   Scene statistics</div><div class="line">#         Scene label             Count</div><div class="line">#         --------------------   ------</div><div class="line">#         grocery_store               1</div></pre></td></tr></table></figure>
<h2 id="7-处理链（Processing-chain）"><a href="#7-处理链（Processing-chain）" class="headerlink" title="7. 处理链（Processing chain）"></a>7. 处理链（Processing chain）</h2><p>除了基本的实用程序外，该库还提供了将各种数据处理类链接在一起的机制。这样可以更轻松地构建复杂的数据处理管道。数据处理在包含在链中的处理器（处理器列表）中完成。</p>
<p>所有处理器类都使用<code>dcase_util.processors.ProcessorMixin mixin</code>和特定的实用程序类。例如，<code>dcase_util.processors.AudioReadingProcessor</code>从<code>dcase_util.processors.ProcessorMixin</code>和<code>dcase_util.containers.AudioContainer</code>继承。</p>
<ul>
<li>音频相关处理器：</li>
</ul>
<p><code>dcase_util.processors.AudioReadingProcessor</code>，音频读取，支持多声道音频。<br><code>dcase_util.processors.MonoAudioReadingProcessor</code>，在多声道音频通道的情况下，音频读取将混合到单个通道中。</p>
<ul>
<li>数据处理处理器：</li>
</ul>
<p><code>dcase_util.processors.AggregationProcessor</code>，通过滑动处理窗口聚合数据。<br><code>dcase_util.processors.SequencingProcessor</code>，将数据矩阵分割成序列。<br><code>dcase_util.processors.NormalizationProcessor</code>，规范数据矩阵。<br><code>dcase_util.processors.RepositoryNormalizationProcessor</code>，规范存储在仓库中的数据。<br><code>dcase_util.processors.StackingProcesso</code>r根据存储在存储库中的数据堆叠新的特征矩阵。</p>
<ul>
<li>数据编码处理器：</li>
</ul>
<p><code>dcase_util.processors.OneHotEncodingProcessor</code>，one-hot编码（分类）。<br><code>dcase_util.processors.ManyHotEncodingProcessor</code>，many-hot编码（标记）。<br><code>dcase_util.processors.EventRollEncodingProcessor</code>，事件滚动编码（检测）。</p>
<ul>
<li><p>特征提取处理器：</p>
<ul>
<li><p><code>dcase_util.processors.RepositoryFeatureExtractorProcessor</code>，同时提取许多要素类型，并将它们存储到单个存储库中。支持多声道音频输入。</p>
</li>
<li><p><code>dcase_util.processors.MelExtractorProcessor</code>，提取梅尔带能量。仅支持单声道音频。</p>
</li>
<li><p><code>dcase_util.processors.MfccStaticExtractorProcessor</code>，提取静态MFCC。仅支持单声道音频。</p>
</li>
<li><p><code>dcase_util.processors.MfccDeltaExtractorProcessor</code>，提取delta MFCC。仅支持单声道音频。</p>
</li>
<li><p><code>dcase_util.processors.MfccAccelerationExtractorProcessor</code>，提取加速MFCC。仅支持单声道音频。</p>
</li>
<li><p><code>dcase_util.processors.ZeroCrossingRateExtractorProcessor</code>，提取过零率。仅支持单声道音频。</p>
</li>
<li><code>dcase_util.processors.RMSEnergyExtractorProcessor</code>，提取RMS能量。仅支持单声道音频。</li>
<li><code>dcase_util.processors.SpectralCentroidExtractorProcessor</code>，提取光谱质心。仅支持单声道音频。</li>
</ul>
</li>
<li><p>元数据处理器：</p>
</li>
</ul>
<p><code>dcase_util.processors.MetadataReadingProcesso</code>r，从文件中读取元数据。</p>
<h3 id="7-1-特征提取和处理"><a href="#7-1-特征提取和处理" class="headerlink" title="7.1 特征提取和处理"></a>7.1 特征提取和处理</h3><ul>
<li>为音频文件提取梅尔带能量： </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line"># Define processing chain</div><div class="line">chain = dcase_util.processors.ProcessingChain([</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.MonoAudioReadingProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;</div><div class="line">            &apos;fs&apos;: 44100</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.MelExtractorProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;&#125;</div><div class="line">    &#125;</div><div class="line">])</div><div class="line"># Run the processing chain</div><div class="line">data = chain.process(filename=dcase_util.utils.Example().audio_filename())</div><div class="line">data.show()</div><div class="line"># FeatureContainer :: Class</div><div class="line">#   Data</div><div class="line">#     data                            : matrix (40,501)</div><div class="line">#     Dimensions</div><div class="line">#       time_axis                     : 1</div><div class="line">#       data_axis                     : 0</div><div class="line">#     Timing information</div><div class="line">#       time_resolution               : 0.02 sec</div><div class="line">#   Meta</div><div class="line">#     stats                           : Calculated</div><div class="line">#     metadata                        : -</div><div class="line">#     processing_chain                : ProcessingChain :: Class</div><div class="line">#                                       [0]</div><div class="line">#                                          DictContainer :: Class</div><div class="line">#                                            init_parameters</div><div class="line">#                                              _focus_channel                  : None</div><div class="line">#                                              _focus_start                    : 0</div><div class="line">#                                              _focus_stop                     : None</div><div class="line">#                                              channel_axis                    : 0</div><div class="line">#                                              data_synced_with_file           : False</div><div class="line">#                                              filename                        : None</div><div class="line">#                                              fs                              : 44100</div><div class="line">#                                              mono                            : True</div><div class="line">#                                              time_axis                       : 1</div><div class="line">#                                            input_type                        : NONE</div><div class="line">#                                            output_type                       : AUDIO</div><div class="line">#                                            process_parameters</div><div class="line">#                                              filename                        : dcase_util/utils/example_data/acoustic_scene.flac</div><div class="line">#                                              focus_channel                   : None</div><div class="line">#                                              focus_duration_samples          : (None,)</div><div class="line">#                                              focus_duration_sec              : None</div><div class="line">#                                              focus_start_samples             : None</div><div class="line">#                                              focus_start_sec                 : None</div><div class="line">#                                              focus_stop_samples              : None</div><div class="line">#                                              focus_stop_sec                  : None</div><div class="line">#                                            processor_name                    : dcase_util.processors.MonoAudioReadingProcessor</div><div class="line">#</div><div class="line">#                                       [1]</div><div class="line">#                                          DictContainer :: Class</div><div class="line">#                                            init_parameters</div><div class="line">#                                              eps                             : 2.22044604925e-16</div><div class="line">#                                              fmax                            : None</div><div class="line">#                                              fmin                            : 0</div><div class="line">#                                              fs                              : 44100</div><div class="line">#                                              hop_length_samples              : 882</div><div class="line">#                                              hop_length_seconds              : 0.02</div><div class="line">#                                              htk                             : False</div><div class="line">#                                              log                             : True</div><div class="line">#                                              n_mels                          : 40</div><div class="line">#                                              normalize_mel_bands             : False</div><div class="line">#                                              win_length_samples              : 1764</div><div class="line">#                                              win_length_seconds              : 0.04</div><div class="line">#                                            input_type                        : AUDIO</div><div class="line">#                                            output_type                       : DATA_CONTAINER</div><div class="line">#                                            process_parameters</div><div class="line">#                                              filename                        : dcase_util/utils/example_data/acoustic_scene.flac</div><div class="line">#                                            processor_name                    : dcase_util.processors.MelExtractorProcessor</div><div class="line">#</div><div class="line">#</div><div class="line">#   Duration</div><div class="line">#       Frames                        : 501</div><div class="line">#       Seconds                       : 10.02 sec</div></pre></td></tr></table></figure>
<ul>
<li>关注音频的某些部分：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"># Define processing chain</div><div class="line">chain = dcase_util.processors.ProcessingChain([</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.MonoAudioReadingProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;</div><div class="line">            &apos;fs&apos;: 44100</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.MelExtractorProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;&#125;</div><div class="line">    &#125;</div><div class="line">])</div><div class="line"># Run the processing chain</div><div class="line">data = chain.process(</div><div class="line">    filename=dcase_util.utils.Example().audio_filename(),</div><div class="line">    focus_start_seconds=1.0,</div><div class="line">    duration_seconds=2.0</div><div class="line">)</div><div class="line">print(data.shape)</div><div class="line"># (40, 101)</div><div class="line"></div><div class="line"># Run the processing chain</div><div class="line">data = chain.process(</div><div class="line">    filename=dcase_util.utils.Example().audio_filename(),</div><div class="line">    focus_start_samples=44100,</div><div class="line">    focus_stop_samples=44100*2</div><div class="line">)</div><div class="line">print(data.shape)</div><div class="line"># (40, 51)</div></pre></td></tr></table></figure>
<ul>
<li>为音频文件提取几个不同的声学特征，并形成数据矩阵：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line"># Define processing chain</div><div class="line">chain = dcase_util.processors.ProcessingChain([</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.MonoAudioReadingProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;</div><div class="line">            &apos;fs&apos;: 44100</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.RepositoryFeatureExtractorProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;</div><div class="line">            &apos;parameters&apos;: &#123;</div><div class="line">                &apos;mel&apos;: &#123;&#125;,</div><div class="line">                &apos;mfcc&apos;: &#123;&#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.StackingProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;</div><div class="line">            &apos;recipe&apos;: &apos;mel;mfcc=1-19&apos;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">])</div><div class="line"># Run the processing chain</div><div class="line">data = chain.process(filename=dcase_util.utils.Example().audio_filename())</div><div class="line">data.show()</div><div class="line"># FeatureContainer :: Class</div><div class="line">#   Data</div><div class="line">#     data                            : matrix (59,501)</div><div class="line">#     Dimensions</div><div class="line">#       time_axis                     : 1</div><div class="line">#       data_axis                     : 0</div><div class="line">#     Timing information</div><div class="line">#       time_resolution               : 0.02 sec</div><div class="line">#   Meta</div><div class="line">#     stats                           : Calculated</div><div class="line">#     metadata                        : -</div><div class="line">#     processing_chain                : ProcessingChain :: Class</div><div class="line">#                                       [0]</div><div class="line">#                                          DictContainer :: Class</div><div class="line">#                                            init_parameters</div><div class="line">#                                              _focus_channel                  : None</div><div class="line">#                                              _focus_start                    : 0</div><div class="line">#                                              _focus_stop                     : None</div><div class="line">#                                              channel_axis                    : 0</div><div class="line">#                                              data_synced_with_file           : False</div><div class="line">#                                              filename                        : None</div><div class="line">#                                              fs                              : 44100</div><div class="line">#                                              mono                            : True</div><div class="line">#                                              time_axis                       : 1</div><div class="line">#                                            input_type                        : NONE</div><div class="line">#                                            output_type                       : AUDIO</div><div class="line">#                                            process_parameters</div><div class="line">#                                              filename                        : dcase_util/utils/example_data/acoustic_scene.flac</div><div class="line">#                                              focus_channel                   : None</div><div class="line">#                                              focus_duration_samples          : (None,)</div><div class="line">#                                              focus_duration_sec              : None</div><div class="line">#                                              focus_start_samples             : None</div><div class="line">#                                              focus_start_sec                 : None</div><div class="line">#                                              focus_stop_samples              : None</div><div class="line">#                                              focus_stop_sec                  : None</div><div class="line">#                                            processor_name                    : dcase_util.processors.MonoAudioReadingProcessor</div><div class="line">#</div><div class="line">#                                       [1]</div><div class="line">#                                          DictContainer :: Class</div><div class="line">#                                            init_parameters</div><div class="line">#                                              parameters</div><div class="line">#                                                mel</div><div class="line">#                                                mfcc</div><div class="line">#                                            input_type                        : AUDIO</div><div class="line">#                                            output_type                       : DATA_REPOSITORY</div><div class="line">#                                            process_parameters</div><div class="line">#                                            processor_name                    : dcase_util.processors.RepositoryFeatureExtractorProcessor</div><div class="line">#</div><div class="line">#                                       [2]</div><div class="line">#                                          DictContainer :: Class</div><div class="line">#                                            init_parameters</div><div class="line">#                                              hop                             : 1</div><div class="line">#                                              recipe                          : list (2)</div><div class="line">#                                                [0]</div><div class="line">#                                                  label                       : mel</div><div class="line">#                                                [1]</div><div class="line">#                                                  label                       : mfcc</div><div class="line">#                                                  vector-index</div><div class="line">#                                                    full                      : False</div><div class="line">#                                                    selection                 : False</div><div class="line">#                                                    start                     : 1</div><div class="line">#                                                    stop                      : 20</div><div class="line">#                                                    stream                    : 0</div><div class="line">#                                            input_type                        : DATA_REPOSITORY</div><div class="line">#                                            output_type                       : DATA_CONTAINER</div><div class="line">#                                            process_parameters</div><div class="line">#                                            processor_name                    : dcase_util.processors.StackingProcessor</div><div class="line">#</div><div class="line">#</div><div class="line">#   Duration</div><div class="line">#       Frames                        : 501</div><div class="line">#       Seconds                       : 10.02 sec</div><div class="line">data.plot()</div></pre></td></tr></table></figure>
<ul>
<li>为音频文件提取几个不同的声学特征，对它们进行归一化处理，形成数据矩阵，沿时间轴聚合（上下文窗口化），以及将数据拆分成序列：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div></pre></td><td class="code"><pre><div class="line">import numpy</div><div class="line"># Normalization factors</div><div class="line">mel_mean = numpy.array([</div><div class="line">    -3.26094211, -4.20447522, -4.57860912, -5.11036974, -5.33019526,</div><div class="line">    -5.48390484, -5.50473626, -5.54014946, -5.28249358, -5.12090705,</div><div class="line">    -5.21508926, -5.3824216 , -5.37758142, -5.38829567, -5.4912112 ,</div><div class="line">    -5.55352419, -5.72801733, -6.02412347, -6.41367833, -6.64073975,</div><div class="line">    -6.80493457, -6.8717373 , -6.88140949, -6.91464104, -7.00929399,</div><div class="line">    -7.13497673, -7.36417664, -7.73457445, -8.25007518, -8.79878143,</div><div class="line">    -9.22709866, -9.28843908, -9.57054527, -9.82846299, -9.85425306,</div><div class="line">    -9.90253041, -9.85194976, -9.62786338, -9.38480217, -9.18478766</div><div class="line">    ])</div><div class="line">mel_std = numpy.array([</div><div class="line">    0.3450398 ,  0.47330394,  0.53112192,  0.57607313,  0.66710664,</div><div class="line">     0.70052532,  0.79045046,  0.81864229,  0.79422025,  0.76691708,</div><div class="line">     0.64798516,  0.59340713,  0.57756029,  0.64032687,  0.70226395,</div><div class="line">     0.75670044,  0.80861907,  0.79305124,  0.7289238 ,  0.75346821,</div><div class="line">     0.77785602,  0.7350573 ,  0.75137917,  0.77171676,  0.80314121,</div><div class="line">     0.78965339,  0.79256442,  0.82524546,  0.84596991,  0.76430333,</div><div class="line">     0.69690919,  0.69591269,  0.54718615,  0.5277196 ,  0.61271734,</div><div class="line">     0.54482468,  0.42716334,  0.25561558,  0.08991936,  0.06402002</div><div class="line">])</div><div class="line"></div><div class="line">mfcc_mean = numpy.array([</div><div class="line">    -1.89603847e+02,   4.88930395e+01,  -8.37911555e+00,</div><div class="line">      2.58522036e+00,   4.51964497e+00,  -3.87312873e-01,</div><div class="line">      8.97250541e+00,   1.61597737e+00,   1.74111135e+00,</div><div class="line">      2.50223131e+00,   3.03385048e+00,   1.34561742e-01,</div><div class="line">      1.04119803e+00,  -2.57486399e-01,   7.58245525e-01,</div><div class="line">      1.11375319e+00,   5.45536494e-01,   7.62699140e-01,</div><div class="line">      9.34355519e-01,   1.57158221e-01</div><div class="line">])</div><div class="line">mfcc_std = numpy.array([</div><div class="line">    15.94006483,   2.39593761,   4.78748908,   2.39555341,</div><div class="line">      2.66573364,   1.75496556,   2.75005027,   1.5436589 ,</div><div class="line">      1.81070379,   1.39476785,   1.22560606,   1.25575051,</div><div class="line">      1.34613239,   1.46778281,   1.19398649,   1.1590474 ,</div><div class="line">      1.1309816 ,   1.12975486,   0.95503429,   1.01747647</div><div class="line">])</div><div class="line"></div><div class="line"># Define processing chain</div><div class="line">chain = dcase_util.processors.ProcessingChain([</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.MonoAudioReadingProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;</div><div class="line">            &apos;fs&apos;: 44100</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.RepositoryFeatureExtractorProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;</div><div class="line">            &apos;parameters&apos;: &#123;</div><div class="line">                &apos;mel&apos;: &#123;&#125;,</div><div class="line">                &apos;mfcc&apos;: &#123;&#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.RepositoryNormalizationProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;</div><div class="line">            &apos;parameters&apos;: &#123;</div><div class="line">                &apos;mel&apos;: &#123;</div><div class="line">                    &apos;mean&apos;: mel_mean,</div><div class="line">                    &apos;std&apos;: mel_std</div><div class="line">                &#125;,</div><div class="line">                &apos;mfcc&apos;: &#123;</div><div class="line">                    &apos;mean&apos;: mfcc_mean,</div><div class="line">                    &apos;std&apos;: mfcc_std</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.StackingProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;</div><div class="line">            &apos;recipe&apos;: &apos;mel;mfcc=1-19&apos;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.AggregationProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;</div><div class="line">            &apos;recipe&apos;: [&apos;flatten&apos;],</div><div class="line">            &apos;win_length_frames&apos;: 5,</div><div class="line">            &apos;hop_length_frames&apos;: 1,</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.SequencingProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;</div><div class="line">            &apos;frames&apos;: 20,</div><div class="line">            &apos;hop_length_frames&apos;: 20,</div><div class="line">            &apos;padding&apos;: True</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">])</div><div class="line">data = chain.process(filename=dcase_util.utils.Example().audio_filename())</div><div class="line">data.show()</div><div class="line"># DataMatrix3DContainer :: Class</div><div class="line">#   Data</div><div class="line">#     data                            : matrix (295,20,26)</div><div class="line">#     Dimensions</div><div class="line">#       time_axis                     : 1</div><div class="line">#       data_axis                     : 0</div><div class="line">#       sequence_axis                 : 2</div><div class="line">#     Timing information</div><div class="line">#       time_resolution               : None</div><div class="line">#   Meta</div><div class="line">#     stats                           : Calculated</div><div class="line">#     metadata                        : -</div><div class="line">#     processing_chain                : ProcessingChain :: Class</div><div class="line">#                                       [0]</div><div class="line">#                                          DictContainer :: Class</div><div class="line">#                                            init_parameters</div><div class="line">#                                              _focus_channel                  : None</div><div class="line">#                                              _focus_start                    : 0</div><div class="line">#                                              _focus_stop                     : None</div><div class="line">#                                              channel_axis                    : 0</div><div class="line">#                                              data_synced_with_file           : False</div><div class="line">#                                              filename                        : None</div><div class="line">#                                              fs                              : 44100</div><div class="line">#                                              mono                            : True</div><div class="line">#                                              time_axis                       : 1</div><div class="line">#                                            input_type                        : NONE</div><div class="line">#                                            output_type                       : AUDIO</div><div class="line">#                                            process_parameters</div><div class="line">#                                              filename                        : dcase_util/utils/example_data/acoustic_scene.flac</div><div class="line">#                                              focus_channel                   : None</div><div class="line">#                                              focus_duration_samples          : (None,)</div><div class="line">#                                              focus_duration_sec              : None</div><div class="line">#                                              focus_start_samples             : None</div><div class="line">#                                              focus_start_sec                 : None</div><div class="line">#                                              focus_stop_samples              : None</div><div class="line">#                                              focus_stop_sec                  : None</div><div class="line">#                                            processor_name                    : dcase_util.processors.MonoAudioReadingProcessor</div><div class="line">#</div><div class="line">#                                       [1]</div><div class="line">#                                          DictContainer :: Class</div><div class="line">#                                            init_parameters</div><div class="line">#                                              parameters</div><div class="line">#                                                mel</div><div class="line">#                                                mfcc</div><div class="line">#                                            input_type                        : AUDIO</div><div class="line">#                                            output_type                       : DATA_REPOSITORY</div><div class="line">#                                            process_parameters</div><div class="line">#                                            processor_name                    : dcase_util.processors.RepositoryFeatureExtractorProcessor</div><div class="line">#</div><div class="line">#                                       [2]</div><div class="line">#                                          DictContainer :: Class</div><div class="line">#                                            init_parameters</div><div class="line">#                                              parameters</div><div class="line">#                                                mel</div><div class="line">#                                                  mean                        : matrix (40,1)</div><div class="line">#                                                  std                         : matrix (40,1)</div><div class="line">#                                                mfcc</div><div class="line">#                                                  mean                        : matrix (20,1)</div><div class="line">#                                                  std                         : matrix (20,1)</div><div class="line">#                                            input_type                        : DATA_REPOSITORY</div><div class="line">#                                            output_type                       : DATA_REPOSITORY</div><div class="line">#                                            process_parameters</div><div class="line">#                                            processor_name                    : dcase_util.processors.RepositoryNormalizationProcessor</div><div class="line">#</div><div class="line">#                                       [3]</div><div class="line">#                                          DictContainer :: Class</div><div class="line">#                                            init_parameters</div><div class="line">#                                              hop                             : 1</div><div class="line">#                                              recipe                          : list (2)</div><div class="line">#                                                [0]</div><div class="line">#                                                  label                       : mel</div><div class="line">#                                                [1]</div><div class="line">#                                                  label                       : mfcc</div><div class="line">#                                                  vector-index</div><div class="line">#                                                    full                      : False</div><div class="line">#                                                    selection                 : False</div><div class="line">#                                                    start                     : 1</div><div class="line">#                                                    stop                      : 20</div><div class="line">#                                                    stream                    : 0</div><div class="line">#                                            input_type                        : DATA_REPOSITORY</div><div class="line">#                                            output_type                       : DATA_CONTAINER</div><div class="line">#                                            process_parameters</div><div class="line">#                                            processor_name                    : dcase_util.processors.StackingProcessor</div><div class="line">#</div><div class="line">#                                       [4]</div><div class="line">#                                          DictContainer :: Class</div><div class="line">#                                            init_parameters</div><div class="line">#                                              hop_length_frames               : 1</div><div class="line">#                                              recipe                          : list (1)</div><div class="line">#                                                [0]                           : flatten</div><div class="line">#                                              win_length_frames               : 5</div><div class="line">#                                            input_type                        : DATA_CONTAINER</div><div class="line">#                                            output_type                       : DATA_CONTAINER</div><div class="line">#                                            process_parameters</div><div class="line">#                                            processor_name                    : dcase_util.processors.AggregationProcessor</div><div class="line">#</div><div class="line">#                                       [5]</div><div class="line">#                                          DictContainer :: Class</div><div class="line">#                                            init_parameters</div><div class="line">#                                              frames                          : 20</div><div class="line">#                                              hop_length_frames               : 20</div><div class="line">#                                              padding                         : True</div><div class="line">#                                              shift                           : 0</div><div class="line">#                                              shift_border                    : roll</div><div class="line">#                                              shift_max                       : None</div><div class="line">#                                              shift_step                      : 0</div><div class="line">#                                            input_type                        : DATA_CONTAINER</div><div class="line">#                                            output_type                       : DATA_CONTAINER</div><div class="line">#                                            process_parameters</div><div class="line">#                                            processor_name                    : dcase_util.processors.SequencingProcessor</div><div class="line">#</div><div class="line">#</div><div class="line">#   Duration</div><div class="line">#       Frames                        : 20</div></pre></td></tr></table></figure>
<h3 id="7-2-元数据处理（Meta-data-processing）"><a href="#7-2-元数据处理（Meta-data-processing）" class="headerlink" title="7.2 元数据处理（Meta data processing）"></a>7.2 元数据处理（Meta data processing）</h3><ul>
<li>获得事件卷（event roll）：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">import tempfile</div><div class="line">tmp = tempfile.NamedTemporaryFile(&apos;r+&apos;, suffix=&apos;.txt&apos;, delete=False)</div><div class="line">dcase_util.utils.Example.event_metadata_container().save(filename=tmp.name)</div><div class="line"></div><div class="line"># Define processing chain</div><div class="line">chain = dcase_util.processors.ProcessingChain([</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.MetadataReadingProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;&#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.EventRollEncodingProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;</div><div class="line">            &apos;label_list&apos;: dcase_util.utils.Example.event_metadata_container().unique_event_labels,</div><div class="line">            &apos;time_resolution&apos;: 0.02,</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">])</div><div class="line"></div><div class="line"># Do the processing</div><div class="line">data = chain.process(</div><div class="line">    filename=tmp.name,</div><div class="line">    focus_filename=&apos;test1.wav&apos;</div><div class="line">)</div><div class="line"></div><div class="line"># Plot data</div><div class="line">data.plot()</div></pre></td></tr></table></figure>
<ul>
<li>获取用于焦点段事件卷：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">import tempfile</div><div class="line">tmp = tempfile.NamedTemporaryFile(&apos;r+&apos;, suffix=&apos;.txt&apos;, delete=False)</div><div class="line">dcase_util.utils.Example.event_metadata_container().save(filename=tmp.name)</div><div class="line"></div><div class="line"># Define processing chain</div><div class="line">chain = dcase_util.processors.ProcessingChain([</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.MetadataReadingProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;&#125;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        &apos;processor_name&apos;: &apos;dcase_util.processors.EventRollEncodingProcessor&apos;,</div><div class="line">        &apos;init_parameters&apos;: &#123;</div><div class="line">            &apos;label_list&apos;: dcase_util.utils.Example.event_metadata_container().unique_event_labels,</div><div class="line">            &apos;time_resolution&apos;: 0.02,</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">])</div><div class="line"></div><div class="line"># Do the processing</div><div class="line">data = chain.process(</div><div class="line">    filename=tmp.name,</div><div class="line">    focus_filename=&apos;test1.wav&apos;,</div><div class="line">    focus_start_seconds=2.0,</div><div class="line">    focus_stop_seconds=6.5,</div><div class="line">)</div><div class="line"></div><div class="line"># Plot data</div><div class="line">data.plot()</div></pre></td></tr></table></figure>
<h2 id="应用的例子"><a href="#应用的例子" class="headerlink" title="应用的例子"></a>应用的例子</h2><p>声场景分类器<br>本教程演示如何使用dcase_util中的实用程序构建简单的声场景分类器。 声场景分类器应用程序通常包含以下阶段：</p>
<ul>
<li>数据集初始化阶段，使用数据集已下载并准备使用。</li>
<li>特征提取阶段将为开发数据集中的所有音频文件提取声学特征，并存储到磁盘以便稍后访问</li>
<li>特征标准化阶段，通过交叉验证折叠训练材料并计算声学特征的均值和标准差以稍后对特征数据进行归一化</li>
<li>学习阶段，通过交叉验证折叠的培训材料，并学习声学模型。</li>
<li>测试阶段，通过交叉验证折叠测试材料，并估计每个样本的场景类别。</li>
<li>评估，评估系统输出与地面真相。</li>
</ul>
<p>本例使用DCASE2013（10场景类），静态MFCC作为特征，GMM作为分类器发布的声场景数据集。 例子只显示了最少的代码，通常的开发系统需要更好的参数化来使系统开发更容易。</p>
<p>完整的代码示例可以找到<code>examples / asc_gmm_simple.py</code>。</p>
<ul>
<li>数据集初始化<br>本示例使用针对DCASE2013发布的声场景数据集，处理此类的数据集类随<code>dcase_utils：dcase_util.datasets.DCASE2013_Scenes_DevelopmentSet</code>一起提供。</li>
</ul>
<p>数据集需要先下载，解压缩到磁盘，并准备好使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">import os</div><div class="line">import dcase_util</div><div class="line"># Setup logging</div><div class="line">dcase_util.utils.setup_logging()</div><div class="line"></div><div class="line">log = dcase_util.ui.FancyLogger()</div><div class="line">log.title(&apos;Acoustic Scene Classification Example / GMM&apos;)</div><div class="line"></div><div class="line"># Create dataset object and set dataset to be stored under &apos;data&apos; directory.</div><div class="line">db = dcase_util.datasets.DCASE2013_Scenes_DevelopmentSet(</div><div class="line">    data_path=&apos;data&apos;</div><div class="line">)</div><div class="line"></div><div class="line"># Initialize dataset (download, extract and prepare it).</div><div class="line">db.initialize()</div><div class="line"></div><div class="line"># Show dataset information</div><div class="line">db.show()</div><div class="line"># DictContainer :: Class</div><div class="line">#   audio_source                      : Field recording</div><div class="line">#   audio_type                        : Natural</div><div class="line">#   authors                           : D. Giannoulis, E. Benetos, D. Stowell, and M. D. Plumbley</div><div class="line">#   microphone_model                  : Soundman OKM II Klassik/studio A3 electret microphone</div><div class="line">#   recording_device_model            : Unknown</div><div class="line">#   title                             : IEEE AASP CASA Challenge - Public Dataset for Scene Classification Task</div><div class="line">#   url                               : https://archive.org/details/dcase2013_scene_classification</div><div class="line">#</div><div class="line"># MetaDataContainer :: Class</div><div class="line">#   Filename                          : data/DCASE2013-acoustic-scenes-development/meta.txt</div><div class="line">#   Items                             : 100</div><div class="line">#   Unique</div><div class="line">#     Files                           : 100</div><div class="line">#     Scene labels                    : 10</div><div class="line">#     Event labels                    : 0</div><div class="line">#     Tags                            : 0</div><div class="line">#</div><div class="line">#   Scene statistics</div><div class="line">#         Scene label             Count</div><div class="line">#         --------------------   ------</div><div class="line">#         bus                        10</div><div class="line">#         busystreet                 10</div><div class="line">#         office                     10</div><div class="line">#         openairmarket              10</div><div class="line">#         park                       10</div><div class="line">#         quietstreet                10</div><div class="line">#         restaurant                 10</div><div class="line">#         supermarket                10</div><div class="line">#         tube                       10</div><div class="line">#         tubestation                10</div></pre></td></tr></table></figure>
<ul>
<li>特征提取<br>通常，为所有音频文件提取特征并将其存储在磁盘上是最有效的，而不是在每次需要声学特征时都提取它们。 示例如何执行此操作：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">log.section_header(&apos;Feature Extraction&apos;)</div><div class="line"></div><div class="line"># Prepare feature extractor</div><div class="line">extractor = dcase_util.features.MfccStaticExtractor(</div><div class="line">    fs=44100,</div><div class="line">    win_length_seconds=0.04,</div><div class="line">    hop_length_seconds=0.02,</div><div class="line">    n_mfcc=14</div><div class="line">)</div><div class="line"># Define feature storage path</div><div class="line">feature_storage_path = os.path.join(&apos;system_data&apos;, &apos;features&apos;)</div><div class="line"></div><div class="line"># Make sure path exists</div><div class="line">dcase_util.utils.Path().create(feature_storage_path)</div><div class="line"></div><div class="line"># Loop over all audio files in the dataset and extract features for them.</div><div class="line">for audio_filename in db.audio_files:</div><div class="line">    # Show some progress</div><div class="line">    log.line(os.path.split(audio_filename)[1], indent=2)</div><div class="line"></div><div class="line">    # Get filename for feature data from audio filename</div><div class="line">    feature_filename = os.path.join(</div><div class="line">        feature_storage_path,</div><div class="line">        os.path.split(audio_filename)[1].replace(&apos;.wav&apos;, &apos;.cpickle&apos;)</div><div class="line">    )</div><div class="line"></div><div class="line">    # Load audio data</div><div class="line">    audio = dcase_util.containers.AudioContainer().load(</div><div class="line">        filename=audio_filename,</div><div class="line">        mono=True,</div><div class="line">        fs=extractor.fs</div><div class="line">    )</div><div class="line"></div><div class="line">    # Extract features and store them into FeatureContainer, and save it to the disk</div><div class="line">    features = dcase_util.containers.FeatureContainer(</div><div class="line">        filename=feature_filename,</div><div class="line">        data=extractor.extract(audio.data),</div><div class="line">        time_resolution=extractor.hop_length_seconds</div><div class="line">    ).save()</div><div class="line"></div><div class="line">log.foot()</div></pre></td></tr></table></figure>
<ul>
<li>特征标准化（Feature normalization）<br>在这个阶段，每个交叉验证折叠都会通过培训材料，并计算声学特征的均值和标准差。 这些归一化因子用于在特征数据在学习和测试阶段使用之前对其进行归一化。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">log.section_header(&apos;Feature Normalization&apos;)</div><div class="line"></div><div class="line"># Define normalization data storage path</div><div class="line">normalization_storage_path = os.path.join(&apos;system_data&apos;, &apos;normalization&apos;)</div><div class="line"></div><div class="line"># Make sure path exists</div><div class="line">dcase_util.utils.Path().create(normalization_storage_path)</div><div class="line"></div><div class="line"># Loop over all cross-validation folds and calculate mean and std for the training data</div><div class="line">for fold in db.folds():</div><div class="line">    # Show some progress</div><div class="line">    log.line(&apos;Fold &#123;fold:d&#125;&apos;.format(fold=fold), indent=2)</div><div class="line"></div><div class="line">    # Get filename for the normalization factors</div><div class="line">    fold_stats_filename = os.path.join(</div><div class="line">        normalization_storage_path,</div><div class="line">        &apos;norm_fold_&#123;fold:d&#125;.cpickle&apos;.format(fold=fold)</div><div class="line">    )</div><div class="line"></div><div class="line">    # Normalizer</div><div class="line">    normalizer = dcase_util.data.Normalizer(filename=fold_stats_filename)</div><div class="line"></div><div class="line">    # Loop through all training data</div><div class="line">    for item in db.train(fold=fold):</div><div class="line">        # Get feature filename</div><div class="line">        feature_filename = os.path.join(</div><div class="line">            feature_storage_path,</div><div class="line">            os.path.split(item.filename)[1].replace(&apos;.wav&apos;, &apos;.cpickle&apos;)</div><div class="line">        )</div><div class="line"></div><div class="line">        # Load feature matrix</div><div class="line">        features = dcase_util.containers.FeatureContainer().load(</div><div class="line">            filename=feature_filename</div><div class="line">        )</div><div class="line"></div><div class="line">        # Accumulate statistics</div><div class="line">        normalizer.accumulate(features.data)</div><div class="line"></div><div class="line">    # Finalize and save</div><div class="line">    normalizer.finalize().save()</div><div class="line"></div><div class="line">log.foot()</div></pre></td></tr></table></figure>
<ul>
<li>模型学习<br>在这个阶段，虽然通过交叉验证折叠了训练材料，并且学习和存储声学模型。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line">log.section_header(&apos;Learning&apos;)</div><div class="line"></div><div class="line"># Imports</div><div class="line">from sklearn.mixture import GaussianMixture</div><div class="line">import numpy</div><div class="line"></div><div class="line"># Define model data storage path</div><div class="line">model_storage_path = os.path.join(&apos;system_data&apos;, &apos;model&apos;)</div><div class="line"></div><div class="line"># Make sure path exists</div><div class="line">dcase_util.utils.Path().create(model_storage_path)</div><div class="line"></div><div class="line"># Loop over all cross-validation folds and learn acoustic models</div><div class="line">for fold in db.folds():</div><div class="line">    # Show some progress</div><div class="line">    log.line(&apos;Fold &#123;fold:d&#125;&apos;.format(fold=fold), indent=2)</div><div class="line"></div><div class="line">    # Get model filename</div><div class="line">    fold_model_filename = os.path.join(</div><div class="line">        model_storage_path,</div><div class="line">        &apos;model_fold_&#123;fold:d&#125;.cpickle&apos;.format(fold=fold)</div><div class="line">    )</div><div class="line"></div><div class="line">    # Get filename for the normalizer</div><div class="line">    fold_stats_filename = os.path.join(</div><div class="line">        normalization_storage_path,</div><div class="line">        &apos;norm_fold_&#123;fold:d&#125;.cpickle&apos;.format(fold=fold)</div><div class="line">    )</div><div class="line"></div><div class="line">    # Normalizer</div><div class="line">    normalizer = dcase_util.data.Normalizer().load(filename=fold_stats_filename)</div><div class="line"></div><div class="line">    # Collect class wise training data</div><div class="line">    class_wise_data = &#123;&#125;</div><div class="line">    for scene_label in db.scene_labels():</div><div class="line">        class_wise_data[scene_label] = []</div><div class="line"></div><div class="line">        # Loop through all training items from specific scene class</div><div class="line">        for item in db.train(fold=fold).filter(scene_label=scene_label):</div><div class="line">            # Get feature filename</div><div class="line">            feature_filename = os.path.join(</div><div class="line">                feature_storage_path,</div><div class="line">                os.path.split(item.filename)[1].replace(&apos;.wav&apos;, &apos;.cpickle&apos;)</div><div class="line">            )</div><div class="line"></div><div class="line">            # Load all features.</div><div class="line">            features = dcase_util.containers.FeatureContainer().load(</div><div class="line">                filename=feature_filename</div><div class="line">            )</div><div class="line"></div><div class="line">            # Normalize features.</div><div class="line">            normalizer.normalize(features)</div><div class="line"></div><div class="line">            # Store feature data.</div><div class="line">            class_wise_data[scene_label].append(features.data)</div><div class="line"></div><div class="line">    # Initialize model container.</div><div class="line">    model = dcase_util.containers.DictContainer(filename=fold_model_filename)</div><div class="line"></div><div class="line">    # Loop though all scene classes and train acoustic model for each</div><div class="line">    for scene_label in db.scene_labels():</div><div class="line">        # Show some progress</div><div class="line">        log.line(&apos;[&#123;scene_label&#125;]&apos;.format(scene_label=scene_label), indent=4)</div><div class="line"></div><div class="line">        # Train acoustic model</div><div class="line">        model[scene_label] = GaussianMixture(</div><div class="line">            n_components=8</div><div class="line">        ).fit(</div><div class="line">            numpy.hstack(class_wise_data[scene_label]).T</div><div class="line">        )</div><div class="line"></div><div class="line">    # Save model to the disk</div><div class="line">    model.save()</div><div class="line"></div><div class="line">log.foot()</div></pre></td></tr></table></figure>
<ul>
<li>测试<br>在这个阶段，测试材料通过每次交叉验证折叠，并且针对每个测试样本估计场景类别。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line">log.section_header(&apos;Testing&apos;)</div><div class="line"></div><div class="line"># Define model data storage path</div><div class="line">results_storage_path = os.path.join(&apos;system_data&apos;, &apos;results&apos;)</div><div class="line"></div><div class="line"># Make sure path exists</div><div class="line">dcase_util.utils.Path().create(results_storage_path)</div><div class="line"></div><div class="line"># Loop over all cross-validation folds and test</div><div class="line">for fold in db.folds():</div><div class="line">    # Show some progress</div><div class="line">    log.line(&apos;Fold &#123;fold:d&#125;&apos;.format(fold=fold), indent=2)</div><div class="line"></div><div class="line">    # Get model filename</div><div class="line">    fold_model_filename = os.path.join(</div><div class="line">        model_storage_path,</div><div class="line">        &apos;model_fold_&#123;fold:d&#125;.cpickle&apos;.format(fold=fold)</div><div class="line">    )</div><div class="line"></div><div class="line">    # Load model</div><div class="line">    model = dcase_util.containers.DictContainer().load(</div><div class="line">        filename=fold_model_filename</div><div class="line">    )</div><div class="line"></div><div class="line">    # Get filename for the normalizer</div><div class="line">    fold_stats_filename = os.path.join(</div><div class="line">        normalization_storage_path,</div><div class="line">        &apos;norm_fold_&#123;fold:d&#125;.cpickle&apos;.format(fold=fold)</div><div class="line">    )</div><div class="line"></div><div class="line">    # Normalizer</div><div class="line">    normalizer = dcase_util.data.Normalizer().load(filename=fold_stats_filename)</div><div class="line"></div><div class="line">    # Get results filename</div><div class="line">    fold_results_filename = os.path.join(results_storage_path, &apos;res_fold_&#123;fold:d&#125;.txt&apos;.format(fold=fold))</div><div class="line"></div><div class="line">    # Initialize results container</div><div class="line">    res = dcase_util.containers.MetaDataContainer(filename=fold_results_filename)</div><div class="line"></div><div class="line">    # Loop through all test files from the current cross-validation fold</div><div class="line">    for item in db.test(fold=fold):</div><div class="line">        # Get feature filename</div><div class="line">        feature_filename = os.path.join(</div><div class="line">            feature_storage_path,</div><div class="line">            os.path.split(item.filename)[1].replace(&apos;.wav&apos;, &apos;.cpickle&apos;)</div><div class="line">        )</div><div class="line"></div><div class="line">        # Load all features.</div><div class="line">        features = dcase_util.containers.FeatureContainer().load(</div><div class="line">            filename=feature_filename</div><div class="line">        )</div><div class="line"></div><div class="line">        # Normalize features.</div><div class="line">        normalizer.normalize(features)</div><div class="line"></div><div class="line">        # Initialize log likelihoods matrix</div><div class="line">        logls = numpy.ones((db.scene_label_count(), features.frames)) * -numpy.inf</div><div class="line"></div><div class="line">        # Loop through all scene classes and get likelihood for each per frame</div><div class="line">        for scene_label_id, scene_label in enumerate(db.scene_labels()):</div><div class="line">            logls[scene_label_id] = model[scene_label].score_samples(features.data.T)</div><div class="line"></div><div class="line">        # Accumulate log likelihoods</div><div class="line">        accumulated_logls = dcase_util.data.ProbabilityEncoder().collapse_probabilities(</div><div class="line">            probabilities=logls,</div><div class="line">            operator=&apos;sum&apos;</div><div class="line">        )</div><div class="line"></div><div class="line">        # Estimate scene label based on max likelihood.</div><div class="line">        estimated_scene_label = dcase_util.data.ProbabilityEncoder(</div><div class="line">            label_list=db.scene_labels()</div><div class="line">        ).max_selection(</div><div class="line">            probabilities=accumulated_logls</div><div class="line">        )</div><div class="line"></div><div class="line">        # Store result into results container</div><div class="line">        res.append(</div><div class="line">            &#123;</div><div class="line">                &apos;filename&apos;: item.filename,</div><div class="line">                &apos;scene_label&apos;: estimated_scene_label</div><div class="line">            &#125;</div><div class="line">        )</div><div class="line"></div><div class="line">    # Save results container</div><div class="line">    res.save()</div><div class="line">log.foot()</div></pre></td></tr></table></figure>
<ul>
<li>评估<br>在这个阶段，系统输出是根据数据集提供的地面实况来评估的。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">log.section_header(&apos;Evaluation&apos;)</div><div class="line"></div><div class="line"># Imports</div><div class="line">import sed_eval</div><div class="line"></div><div class="line">all_res = []</div><div class="line">overall = []</div><div class="line">class_wise_results = numpy.zeros((len(db.folds()), len(db.scene_labels())))</div><div class="line">for fold in db.folds():</div><div class="line">    # Get results filename</div><div class="line">    fold_results_filename = os.path.join(</div><div class="line">        results_storage_path,</div><div class="line">        &apos;res_fold_&#123;fold:d&#125;.txt&apos;.format(fold=fold)</div><div class="line">    )</div><div class="line"></div><div class="line">    # Get reference scenes</div><div class="line">    reference_scene_list = db.eval(fold=fold)</div><div class="line">    for item_id, item in enumerate(reference_scene_list):</div><div class="line">        # Modify data for sed_eval</div><div class="line">        reference_scene_list[item_id][&apos;file&apos;] = item.filename</div><div class="line"></div><div class="line">    # Load estimated scenes</div><div class="line">    estimated_scene_list = dcase_util.containers.MetaDataContainer().load(</div><div class="line">        filename=fold_results_filename</div><div class="line">    )</div><div class="line">    for item_id, item in enumerate(estimated_scene_list):</div><div class="line">        # Modify data for sed_eval</div><div class="line">        estimated_scene_list[item_id][&apos;file&apos;] = item.filename</div><div class="line"></div><div class="line">    # Initialize evaluator</div><div class="line">    evaluator = sed_eval.scene.SceneClassificationMetrics(scene_labels=db.scene_labels())</div><div class="line"></div><div class="line">    # Evaluate estimated against reference.</div><div class="line">    evaluator.evaluate(</div><div class="line">        reference_scene_list=reference_scene_list,</div><div class="line">        estimated_scene_list=estimated_scene_list</div><div class="line">    )</div><div class="line"></div><div class="line">    # Get results</div><div class="line">    results = dcase_util.containers.DictContainer(evaluator.results())</div><div class="line"></div><div class="line">    # Store fold-wise results</div><div class="line">    all_res.append(results)</div><div class="line">    overall.append(results.get_path(&apos;overall.accuracy&apos;)*100)</div><div class="line"></div><div class="line">    # Get scene class-wise results</div><div class="line">    class_wise_accuracy = []</div><div class="line">    for scene_label_id, scene_label in enumerate(db.scene_labels()):</div><div class="line">        class_wise_accuracy.append(results.get_path([&apos;class_wise&apos;, scene_label, &apos;accuracy&apos;, &apos;accuracy&apos;]))</div><div class="line">        class_wise_results[fold-1, scene_label_id] = results.get_path([&apos;class_wise&apos;, scene_label, &apos;accuracy&apos;, &apos;accuracy&apos;])</div><div class="line"></div><div class="line"># Form results table</div><div class="line">cell_data = class_wise_results</div><div class="line">scene_mean_accuracy = numpy.mean(cell_data, axis=0).reshape((1, -1))</div><div class="line">cell_data = numpy.vstack((cell_data, scene_mean_accuracy))</div><div class="line">fold_mean_accuracy = numpy.mean(cell_data, axis=1).reshape((-1, 1))</div><div class="line">cell_data = numpy.hstack((cell_data, fold_mean_accuracy))</div><div class="line"></div><div class="line">scene_list = db.scene_labels()</div><div class="line">scene_list.extend([&apos;Average&apos;])</div><div class="line">cell_data = [scene_list] + (cell_data*100).tolist()</div><div class="line"></div><div class="line">column_headers = [&apos;Scene&apos;]</div><div class="line">for fold in db.folds():</div><div class="line">    column_headers.append(&apos;Fold &#123;fold:d&#125;&apos;.format(fold=fold))</div><div class="line"></div><div class="line">column_headers.append(&apos;Average&apos;)</div><div class="line"></div><div class="line">log.table(</div><div class="line">    cell_data=cell_data,</div><div class="line">    column_headers=column_headers,</div><div class="line">    column_separators=[0, 5],</div><div class="line">    row_separators=[10],</div><div class="line">    indent=2</div><div class="line">)</div><div class="line">log.foot()</div></pre></td></tr></table></figure>
<ul>
<li>Results:</li>
</ul>
<table>
<thead>
<tr>
<th>Scene</th>
<th>Fold 1</th>
<th>Fold 2</th>
<th>Fold 3</th>
<th>Fold4</th>
<th>Fold 5</th>
<th>header 2</th>
<th>header 2</th>
</tr>
</thead>
<tbody>
<tr>
<td>row 1 col 1</td>
<td>row 1 col 2</td>
<td>row 1 col 2</td>
<td>row 1 col 2</td>
<td>row 1 col 2</td>
<td>row 1 col 2</td>
<td>row 1 col 2</td>
</tr>
<tr>
<td>row 2 col 1</td>
<td>row 2 col 2</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Scene</th>
<th>Fold 1</th>
<th>Fold 2</th>
<th>Fold 3</th>
<th>Fold 4</th>
<th>Fold 5</th>
<th>Average</th>
</tr>
</thead>
<tbody>
<tr>
<td>bus</td>
<td>100.00</td>
<td>100.00</td>
<td>100.00</td>
<td>100.00</td>
<td>100.00</td>
<td>100.00</td>
</tr>
<tr>
<td>busystreet</td>
<td>100.00</td>
<td>33.33</td>
<td>33.33</td>
<td>100.00</td>
<td>66.67</td>
<td>66.67</td>
</tr>
<tr>
<td>office</td>
<td>66.67</td>
<td>100.00</td>
<td>100.00</td>
<td>66.67</td>
<td>100.00</td>
<td>86.67</td>
</tr>
<tr>
<td>openairmarket</td>
<td>66.67</td>
<td>100.00</td>
<td>0.00</td>
<td>66.67</td>
<td>100.00</td>
<td>66.67</td>
</tr>
<tr>
<td>park</td>
<td>33.33</td>
<td>33.33</td>
<td>0.00</td>
<td>33.33</td>
<td>33.33</td>
<td>26.67</td>
</tr>
<tr>
<td>quietstreet</td>
<td>66.67</td>
<td>100.00</td>
<td>33.33</td>
<td>66.67</td>
<td>66.67</td>
<td>66.67</td>
</tr>
<tr>
<td>restaurant</td>
<td>66.67</td>
<td>0.00</td>
<td>66.67</td>
<td>0.00</td>
<td>33.33</td>
<td>33.33</td>
</tr>
<tr>
<td>supermarket</td>
<td>33.33</td>
<td>0.00</td>
<td>33.33</td>
<td>0.00</td>
<td>33.33</td>
<td>20.00</td>
</tr>
<tr>
<td>tube</td>
<td>100.00</td>
<td>33.33</td>
<td>33.33</td>
<td>66.67</td>
<td>66.67</td>
<td>60.00</td>
</tr>
<tr>
<td>tubestation</td>
<td>0.00</td>
<td>66.67</td>
<td>66.67</td>
<td>0.00</td>
<td>0.00</td>
<td>26.67</td>
</tr>
<tr>
<td><strong>Average</strong></td>
<td>63.33</td>
<td>56.67</td>
<td>46.67</td>
<td>50.00</td>
<td>60.00</td>
<td>55.33</td>
</tr>
</tbody>
</table>

      
    </div>
    
    
    
    
    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/python/" rel="tag"># python</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/03/21/CNN相关知识总结/" rel="next" title="CNN相关知识总结">
                <i class="fa fa-chevron-left"></i> CNN相关知识总结
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/03/26/dcase_util(2)/" rel="prev" title="dcase_util教程（二）——各单元介绍">
                dcase_util教程（二）——各单元介绍 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/beatrice.jpg"
               alt="beatrice" />
          <p class="site-author-name" itemprop="name">beatrice</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">109</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">61</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Container"><span class="nav-number">1.</span> <span class="nav-text">1.Container</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1基本用法"><span class="nav-number">1.1.</span> <span class="nav-text">1.1基本用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-字典"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 字典</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-字典列表"><span class="nav-number">1.3.</span> <span class="nav-text">1.3 字典列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-Data-Containers"><span class="nav-number">1.4.</span> <span class="nav-text">1.4 Data Containers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-存储库（Repositories）"><span class="nav-number">1.5.</span> <span class="nav-text">1.5 存储库（Repositories）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-音频"><span class="nav-number">2.</span> <span class="nav-text">2. 音频</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-创建container"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 创建container</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-加载和保存"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 加载和保存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-焦点段（Focus-segment）"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 焦点段（Focus segment）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-处理"><span class="nav-number">2.4.</span> <span class="nav-text">2.4 处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-可视化"><span class="nav-number">2.5.</span> <span class="nav-text">2.5 可视化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-声学特征"><span class="nav-number">3.</span> <span class="nav-text">3. 声学特征</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-特征提取"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 特征提取</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-可视化"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 可视化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-数据处理"><span class="nav-number">4.</span> <span class="nav-text">4. 数据处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-数据操作"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 数据操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-1-归一化"><span class="nav-number">4.1.1.</span> <span class="nav-text">4.1.1 归一化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-2-聚合（Aggregator）"><span class="nav-number">4.1.2.</span> <span class="nav-text">4.1.2 聚合（Aggregator）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-3-测序（Sequencing）"><span class="nav-number">4.1.3.</span> <span class="nav-text">4.1.3 测序（Sequencing）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-4-堆叠（Stacker）"><span class="nav-number">4.1.4.</span> <span class="nav-text">4.1.4 堆叠（Stacker）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-数据编码"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 数据编码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Metadata"><span class="nav-number">5.</span> <span class="nav-text">5. Metadata</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-创建容器-container"><span class="nav-number">5.1.</span> <span class="nav-text">5.1 创建容器(container)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-加载和保存"><span class="nav-number">5.2.</span> <span class="nav-text">5.2 加载和保存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-访问数据"><span class="nav-number">5.3.</span> <span class="nav-text">5.3 访问数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-过滤（Filtering）"><span class="nav-number">5.4.</span> <span class="nav-text">5.4  过滤（Filtering）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-处理（Processing）"><span class="nav-number">5.5.</span> <span class="nav-text">5.5 处理（Processing）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-6-事件滚动（Event-roll）"><span class="nav-number">5.6.</span> <span class="nav-text">5.6 事件滚动（Event roll）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-Datasets"><span class="nav-number">6.</span> <span class="nav-text">6. Datasets</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-初始化数据集"><span class="nav-number">6.1.</span> <span class="nav-text">6.1  初始化数据集</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-交叉验证步骤"><span class="nav-number">6.2.</span> <span class="nav-text">6.2 交叉验证步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-元数据（Meta-data）"><span class="nav-number">6.3.</span> <span class="nav-text">6.3 元数据（Meta data）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-处理链（Processing-chain）"><span class="nav-number">7.</span> <span class="nav-text">7. 处理链（Processing chain）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-特征提取和处理"><span class="nav-number">7.1.</span> <span class="nav-text">7.1 特征提取和处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-元数据处理（Meta-data-processing）"><span class="nav-number">7.2.</span> <span class="nav-text">7.2 元数据处理（Meta data processing）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#应用的例子"><span class="nav-number">8.</span> <span class="nav-text">应用的例子</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-/uploads/avatar.jpg"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">beatrice</span>
</div>


<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
